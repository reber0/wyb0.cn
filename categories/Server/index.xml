<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Server on Reber's Blog</title><link>https://wyb0.cn/categories/Server/</link><description>Recent content in Server on Reber's Blog</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Thu, 14 Jan 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://wyb0.cn/categories/Server/index.xml" rel="self" type="application/rss+xml"/><item><title>中间件安全配置</title><link>https://wyb0.cn/posts/2017/middleware-security-configuration/</link><pubDate>Sat, 28 Oct 2017 13:58:29 +0000</pubDate><guid>https://wyb0.cn/posts/2017/middleware-security-configuration/</guid><description>&lt;h3 id="0x00-apache">0x00 Apache&lt;/h3>
&lt;ul>
&lt;li>服务器安全配置&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>#查看服务器运行权限
$ ps aux|grep apache|grep -v grep
$ sudo lsof -i:80
COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME
apache2 1377 root 4u IPv6 12596 0t0 TCP *:http (LISTEN)
apache2 21121 www-data 4u IPv6 12596 0t0 TCP *:http (LISTEN)
apache2 21122 www-data 4u IPv6 12596 0t0 TCP *:http (LISTEN)
apache2 21123 www-data 4u IPv6 12596 0t0 TCP *:http (LISTEN)
apache2 21124 www-data 4u IPv6 12596 0t0 TCP *:http (LISTEN)
apache2 21125 www-data 4u IPv6 12596 0t0 TCP *:http (LISTEN)
apache2 24800 www-data 4u IPv6 12596 0t0 TCP *:http (LISTEN)
apache2 127488 www-data 4u IPv6 12596 0t0 TCP *:http (LISTEN)

第一行是Apache主进程，以root权限运行的，因为Apache的Web端口是80或443，而在Ubuntu(Linux)中开启小于1024的端口需要root权限，所以主进程必须以root权限运行。
第二行起为Apache子进程，其执行用户为www-data，www-data是Ubuntu中运行Web服务的默认用户，权限较低。

Windows中Apache安装完成后默认是administrator权限，所以需要降权，创建一个用户Apache，用户组为Guests，然后将Apache目录下的日志的可写权限赋给Guests账户。
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>#目录及文件权限
修改配置文件，vim /etc/apache2/apache2.conf解决目录遍历漏洞
#Options Indexes FollowSymLinks
Options FollowSymLinks

或者使用chmod进行权限限制也可以,比如使用chmod o-r flag.txt命令将www-data的读权限去掉

windows也可以通过配置文件或者权限的设置达到上面设置的效果
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>#错误重定向一
$ sudo vim /etc/apache2/apache2.conf
&amp;lt;Directory /var/www/&amp;gt;
 Options Indexes FollowSymLinks
 #AllowOverride None
 AllowOverride All #设置如此
 Require all granted
&amp;lt;/Directory&amp;gt;
$ cat .htaccess
ErrorDocument 404 /404.html

#错误重定向二
$ sudo vim /etc/apache2/apache2.conf
LoadModule rewrite_module modules/mod_rewrite.so #去掉前面的注释符
$ sudo a2enmod rewrite #开启跳转
$ cat .htaccess
ErrorDocument 404 /404.html
RewriteEngine on
RewriteRule &amp;#34;ttt\.html$&amp;#34; aa.html
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>#隐藏apache版本号
$ sudo vim /etc/apache2/conf-available/security.conf
ServerTokens Prod
ServerSignature Off

#隐藏php版本号
$ sudo vim /etc/php5/apache2/php.ini
expose_php = Off
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>#禁止执行脚本
$ vim /etc/apache2/apache2.conf
&amp;lt;Directory /var/www/html/upload/&amp;gt; #禁止执行php
 php_flag engine off
&amp;lt;/Directory&amp;gt;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>Apache日志格式&lt;/li>
&lt;/ul>
&lt;p>vim /etc/apache2/apache2.conf&lt;/p></description></item><item><title>Linux 下虚拟主机搭建多站点</title><link>https://wyb0.cn/posts/2016/linux-virtual-host-build-multi-site/</link><pubDate>Fri, 12 Aug 2016 08:39:35 +0000</pubDate><guid>https://wyb0.cn/posts/2016/linux-virtual-host-build-multi-site/</guid><description>&lt;p>环境：CentOS-6.5-x86_64-minimal&lt;/p>
&lt;h3 id="0x00-搭建lamp">0x00 搭建LAMP&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>安装Apache&lt;/p>
&lt;pre tabindex="0">&lt;code>yum install httpd
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>安装MySQL&lt;/p>
&lt;ul>
&lt;li>yum install mysql mysql-server&lt;/li>
&lt;li>设置数据库&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>[reber@localhost conf]$ sudo mysql_secure_installation
# 更新root密码：
[reber@localhost conf]$ mysql -uroot –p
mysql&amp;gt; use mysql;
mysql&amp;gt; update user set password=password(&amp;#39;123456&amp;#39;) where user=&amp;#39;root&amp;#39;;
mysql&amp;gt; flush privileges; //不想重启mysql就使新密码生效就需要运行此命令刷新
mysql&amp;gt; insert into mysql.user(Host,User,Password) values(&amp;#34;localhost&amp;#34;,&amp;#34;blog&amp;#34;,password(&amp;#34;123456&amp;#34;));
# mysql&amp;gt; detele form mysql.user where User=&amp;#39;blog&amp;#39; and Host=&amp;#39;localhost&amp;#39;; //这步可以删除用户
mysql&amp;gt; flush privileges; //刷新
mysql&amp;gt; create database db_blog;
Query OK, 1 row affected (0.00 sec)
# 授权用户&amp;#34;blog&amp;#34;拥有db_blog数据库的所有权限
mysql&amp;gt; grant all privileges on db_blog.* to blog@localhost identified by &amp;#39;666666&amp;#39;;
mysql&amp;gt; flush privileges; //刷新
[reber@localhost conf]$ mysql –ublog –p //此时就需要用666666登陆数据库db_blog
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>安装PHP&lt;/p></description></item><item><title>一次存储型 XSS 利用实例</title><link>https://wyb0.cn/posts/2016/redis-bisis-use/</link><pubDate>Wed, 03 Aug 2016 11:02:20 +0000</pubDate><guid>https://wyb0.cn/posts/2016/redis-bisis-use/</guid><description>&lt;h3 id="0x00-关于redis">0x00 关于Redis&lt;/h3>
&lt;pre tabindex="0">&lt;code>Redis和MySQL这种关系型数据库不一样，它是非关系型数据库，是日志型、Key-Value数据库，
实现了master-slave(主从)同步,数据都是缓存在内存中的,所以可高速读写,但存储成本较高,
不适合做海量数据存储。
&lt;/code>&lt;/pre>&lt;h3 id="0x01-安装">0x01 安装&lt;/h3>
&lt;ul>
&lt;li>Linux下安装Redis
可在http://download.redis.io/releases/ 下载&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>$ cd /opt
$ wget http://download.redis.io/releases/redis-3.2.3.tar.gz
$ tar -zxvf redis-3.2.3.tar.gz
$ cd redis-3.2.3
$ make
$ make install
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>Windows下安装Redis
下载：&lt;a href="https://github.com/MSOpenTech/redis/releases" target="_blank">点此下载&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>安装后添加环境变量&lt;/p></description></item><item><title>Windows2003 下搭建 VPN</title><link>https://wyb0.cn/posts/2016/windows2003-set-up-vpn/</link><pubDate>Thu, 07 Jul 2016 10:39:50 +0000</pubDate><guid>https://wyb0.cn/posts/2016/windows2003-set-up-vpn/</guid><description>&lt;h3 id="0x00-环境及要求">0x00 环境及要求&lt;/h3>
&lt;p>Windows2003下搭建基于PPTP(点对点隧道协议)的VPN服务器&lt;/p>
&lt;h3 id="0x01-安装服务">0x01 安装服务&lt;/h3>
&lt;p>&lt;img src="https://wyb0.cn/img/post/build_vpn_install_service1.png" alt="70">
&lt;img src="https://wyb0.cn/img/post/build_vpn_install_service2.png" alt="60">
&lt;img src="https://wyb0.cn/img/post/build_vpn_close_firewall.png" alt="80">&lt;/p>
&lt;h3 id="0x02-配置并启用路由和远程访问">0x02 配置并启用路由和远程访问&lt;/h3>
&lt;p>&lt;img src="https://wyb0.cn/img/post/build_vpn_config_and_start_routing_remote_access1.png" alt="35">
&lt;img src="https://wyb0.cn/img/post/build_vpn_config_and_start_routing_remote_access2.png" alt="55">
&lt;img src="https://wyb0.cn/img/post/build_vpn_config_and_start_routing_remote_access3.png" alt="55">
&lt;img src="https://wyb0.cn/img/post/build_vpn_config_and_start_routing_remote_access4.png" alt="65">
&lt;img src="https://wyb0.cn/img/post/build_vpn_config_and_start_routing_remote_access5.png" alt="65">&lt;/p></description></item><item><title>Windows2003 下搭建 IIS+asp</title><link>https://wyb0.cn/posts/2016/windows2003-set-up-iis-asp/</link><pubDate>Sat, 18 Jun 2016 20:39:50 +0000</pubDate><guid>https://wyb0.cn/posts/2016/windows2003-set-up-iis-asp/</guid><description>&lt;h3 id="0x00-添加组件">0x00 添加组件&lt;/h3>
&lt;p>&lt;img src="https://wyb0.cn/img/post/add_component1.png" alt="40">
&lt;img src="https://wyb0.cn/img/post/add_component2.png" alt="55">
&lt;img src="https://wyb0.cn/img/post/add_component3.png" alt="50">
&lt;img src="https://wyb0.cn/img/post/add_component4.png" alt="55">&lt;/p>
&lt;h3 id="0x01-开启iis">0x01 开启iis&lt;/h3>
&lt;p>&lt;img src="https://wyb0.cn/img/post/start_iis1.png" alt="70">
&lt;img src="https://wyb0.cn/img/post/start_iis2.png" alt="50">
&lt;img src="https://wyb0.cn/img/post/visit_iis_index.png" alt="45">&lt;/p>
&lt;h3 id="0x02-添加web服务扩展">0x02 添加Web服务扩展&lt;/h3>
&lt;p>&lt;img src="https://wyb0.cn/img/post/add_ext.png" alt="65">&lt;/p>
&lt;h3 id="0x03-运行asp">0x03 运行asp&lt;/h3>
&lt;p>&lt;img src="https://wyb0.cn/img/post/add_iis_asp.png" alt="50">
&lt;img src="https://wyb0.cn/img/post/visit_iis_asp.png" alt="50">&lt;/p>
&lt;h3 id="0x04-权限">0x04 权限&lt;/h3>
&lt;p>&lt;img src="https://wyb0.cn/img/post/iis_perm.png" alt="55">&lt;/p></description></item><item><title>Linux 下搭建 FTP</title><link>https://wyb0.cn/posts/2016/linux-set-up-ftp/</link><pubDate>Sat, 18 Jun 2016 09:40:06 +0000</pubDate><guid>https://wyb0.cn/posts/2016/linux-set-up-ftp/</guid><description>&lt;p>安装环境为：CentOS-6.5-x86_64-minimal&lt;/p>
&lt;h3 id="0x00-安装">0x00 安装&lt;/h3>
&lt;p>yum install vsftpd&lt;/p>
&lt;h3 id="0x01-配置">0x01 配置&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>备份&lt;br>
cp /etc/vsftpd/vsftpd.conf /etc/vsftpd/vsftpd.conf.bak&lt;/p>
&lt;/li>
&lt;li>
&lt;p>编辑配置文件&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>vim /etc/vsftpd/vsftpd.conf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>anonymous_enable&lt;span style="color:#f92672">=&lt;/span>NO	&lt;span style="color:#75715e">#设定不允许匿名访问&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>local_enable&lt;span style="color:#f92672">=&lt;/span>YES	&lt;span style="color:#75715e">#设定本地用户可以访问&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chroot_list_enable&lt;span style="color:#f92672">=&lt;/span>YES	&lt;span style="color:#75715e">#使用户不能离开主目录&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>xferlog_file&lt;span style="color:#f92672">=&lt;/span>/var/log/vsftpd.log	&lt;span style="color:#75715e">#设定vsftpd的服务日志&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ascii_upload_enable&lt;span style="color:#f92672">=&lt;/span>YES
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ascii_download_enable&lt;span style="color:#f92672">=&lt;/span>YES	&lt;span style="color:#75715e">#设定支持ASCII&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pam_service_name&lt;span style="color:#f92672">=&lt;/span>vsftpd	&lt;span style="color:#75715e">#PAM认证文件名,PAM将根据/etc/pam.d/vsftpd进行认证&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 并在尾部追加：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>guest_enable&lt;span style="color:#f92672">=&lt;/span>YES	&lt;span style="color:#75715e">#设定启用虚拟用户功能。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>guest_username&lt;span style="color:#f92672">=&lt;/span>ftp	&lt;span style="color:#75715e">#指定虚拟用户的宿主用户。-CentOS中已经有内置的ftp用户了&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>guest_config_dir&lt;span style="color:#f92672">=&lt;/span>/etc/vsftpd/vuser_conf	&lt;span style="color:#75715e">#设定虚拟用户个人vsftp的配置文件存放路径。存放虚拟用户个性化的配置文件名，和虚拟用户名相同&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>
&lt;p>新增chroot_list并将ftp用户输入进去&lt;br>
touch /etc/vsftpd/chroot_list&lt;br>
echo ftp &amp;raquo; /etc/vsftpd/chroot_list&lt;/p></description></item><item><title>Linux 下搭建 Tomcat+MySQL+JSP</title><link>https://wyb0.cn/posts/2016/linux-set-up-tomcat-mysql-jsp/</link><pubDate>Fri, 17 Jun 2016 23:08:05 +0000</pubDate><guid>https://wyb0.cn/posts/2016/linux-set-up-tomcat-mysql-jsp/</guid><description>&lt;p>安装环境为：CentOS-6.5-x86_64-minimal&lt;/p>
&lt;h3 id="0x00-安装mysql">0x00 安装mysql&lt;/h3>
&lt;p>$ sudo yum install mysql mysql-server mysql-devel&lt;br>
&lt;img src="https://wyb0.cn/img/post/install_mysql.png" alt="安装mysql.png">
&lt;img src="https://wyb0.cn/img/post/creat_db_tomcat.png" alt="创建数据库tomcat.png">
&lt;img src="https://wyb0.cn/img/post/grant_db_tomcat.png" alt="将数据库tomcat分配给用户tomcat.png">&lt;/p>
&lt;h3 id="0x01-安装jdk和tomcat">0x01 安装jdk和tomcat&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>创建安装jdk和tomcat的文件夹
&lt;img src="https://wyb0.cn/img/post/mkdir_java_tomcat.png" alt="创建安装jdk和tomcat的文件夹.png">&lt;/p></description></item><item><title>Linux 下搭建 Nginx+MySQL+PHP</title><link>https://wyb0.cn/posts/2016/linux-set-up-nginx-mysql-php/</link><pubDate>Fri, 17 Jun 2016 22:41:50 +0000</pubDate><guid>https://wyb0.cn/posts/2016/linux-set-up-nginx-mysql-php/</guid><description>&lt;p>安装环境为：CentOS-6.5-x86_64-minimal&lt;/p>
&lt;h3 id="0x00-准备工作">0x00 准备工作&lt;/h3>
&lt;pre tabindex="0">&lt;code>首先执行：
 sudo yum groupinstall &amp;#34;Development tools&amp;#34;
安装make：
 yum -y install gcc automake autoconf libtool make
安装g++：
 yum install gcc gcc-c++
&lt;/code>&lt;/pre>&lt;h3 id="0x01-安装mysql和php">0x01 安装mysql和php&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo yum install mysql mysql-server mysql-devel
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo yum install php php-devel
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo yum install php-gd php-mysql php-fpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="0x02-安装依赖">0x02 安装依赖&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>安装pcre、pcre-devel&lt;br>
sudo yum install pcre pcre-devel&lt;/p></description></item><item><title>Ubuntu 搭建 LAMP</title><link>https://wyb0.cn/posts/2016/ubuntu-build-lamp/</link><pubDate>Sat, 07 May 2016 21:37:07 +0000</pubDate><guid>https://wyb0.cn/posts/2016/ubuntu-build-lamp/</guid><description>&lt;h3 id="0x00-环境">0x00 环境&lt;/h3>
&lt;p>我是在虚拟机中安装14.04.4版的Ubuntu &lt;a href="http://mirrors.163.com/ubuntu-releases/14.04.4/ubuntu-14.04.4-desktop-amd64.iso">下载Ubuntu14.04.4&lt;/a>&lt;/p>
&lt;h3 id="0x01-配源或选择最快的更新服务器">0x01 配源或选择最快的更新服务器&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>选择最快的更新服务器:&lt;br>
System Settings &amp;ndash;&amp;gt; Software &amp;amp; Updates &amp;ndash;&amp;gt; Download from:other &amp;ndash;&amp;gt; Select Best Server &amp;ndash;&amp;gt; Choose Serve &amp;ndash;&amp;gt; Close&lt;/p></description></item><item><title>搭建 DNS 服务器</title><link>https://wyb0.cn/posts/2015/set-up-dns-server/</link><pubDate>Tue, 14 Jul 2015 14:15:13 +0000</pubDate><guid>https://wyb0.cn/posts/2015/set-up-dns-server/</guid><description>&lt;p>环境: ubuntu-16.04.7-server-amd64.iso&lt;/p>
&lt;p>安装系统时选上 dns 服务，或者 apt install bind9 安装&lt;/p>
&lt;h3 id="0x01-配置前">0x01 配置前&lt;/h3>
&lt;ul>
&lt;li>涉及到的几个配置文件&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>/etc/bind/named.conf，主配置文件，通过 include 关键字加载其他仨配置文件
/etc/bind/named.conf.options，转发器配置文件
/etc/bind/named.conf.local，用户配置文件，一般存放 DNS 记录
/etc/bind/named.default-zones，默认区域文件
/etc/bind/aaa.com.zone，正向解析文件
/etc/bind/aaa.com.arpa，反向解析文件
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>备份&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>cp /etc/bind/named.config.local /etc/bind/named.config.local.bak
cp /etc/bind/named.config.options /etc/bind/named.config.options.bak
&lt;/code>&lt;/pre>&lt;h3 id="0x02-配置-namedconfoptions">0x02 配置 named.conf.options&lt;/h3>
&lt;p>first 先转发给 forwarders 列表进行查询，查询不到再查本地&lt;/p></description></item></channel></rss>