<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.140.2"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=author content="Reber"><title>Reber's Blog</title>
<link rel=stylesheet href=/css/reset.css><link rel=stylesheet href=/css/smigle.css><link rel=stylesheet href=/css/monokai-sublime.min.css><link rel=stylesheet href=/css/style.css><script src=/js/jquery-3.6.0.min.js></script><script src=/js/highlight.min.js></script><script src=/js/style.js></script><link rel=icon type=image/img sizes=16x16 href=/img/logo.png><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"></head><body><header><div id=brand><a class=icon-link href=https://wyb0.cn/><img class=icon src=/img/logo.png></a><div class=text><a href=https://wyb0.cn/><h1>Reber's Blog</h1></a><h3>会一点点编程、会一点点渗透</h3></div></div><nav><a href=/><b>Home</b></a>
|
<a href=/posts/><b>Posts</b></a>
|
<a href=/categories/><b>Categories</b></a>
|
<a href=/tags/><b>Tags</b></a>
|
<a href=/about/><b>About</b></a>
|
<a href=/friends/><b>Friends</b></a></nav><hr></header><div id=content><main><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2021/php-deserialize/>PHP 反序列化</a></h1><div class=post-meta><time>2021-07-08</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96>反序列化</a>)</div><div class=summary-body><p><h3 id=0x01-php-中的魔法函数>0x01 php 中的魔法函数</h3><p>__construct()：PHP 中类的构造函数，创建对象时调用。具有构造函数的类会在每次创建新对象时先调用此方法，所以非常适合在使用对象之前做一些初始化工作。</p><a href=https://wyb0.cn/posts/2021/php-deserialize/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2021/sphinx/>通过 Sphinx 快速查询数据</a></h1><div class=post-meta><time>2021-06-10</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/tools>tools</a>,<a href=/tags/%E7%A4%BE%E5%B7%A5>社工</a>)</div><div class=summary-body><p><h3 id=0x00-sphinx>0x00 Sphinx</h3><p>Sphinx 是一款基于 SQL 的高性能全文检索引擎，Sphinx 的性能在众多全文检索引擎中也是数一数二的，利用 Sphinx我们可以完成比数据库本身更专业的搜索功能，而且可以有很多针对性的性能优化。</p><a href=https://wyb0.cn/posts/2021/sphinx/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2020/get-hash/>获取 NTLM Hash</a></h1><div class=post-meta><time>2020-12-08</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/intranet>intranet</a>)</div><div class=summary-body><p><h3 id=0x01-通过-sam-文件获取>0x01 通过 sam 文件获取</h3><ul><li><p>通过 mimikatz 转储 sam 文件得到 hash(cmd 需要管理员权限)</p><pre tabindex=0><code>mimikatz.exe log &#34;privilege::debug&#34; &#34;token::elevate&#34; &#34;lsadump::sam&#34; exit
</code></pre></li><li><p>通过 reg save 导出 sam 文件(2003 之后可以使用)(导 hiv 文件 cmd 需要管理员权限)</p><a href=https://wyb0.cn/posts/2020/get-hash/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2020/recording-sqlserver-injection/>记一次 SQLServer 注入</a></h1><div class=post-meta><time>2020-06-22</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/SQL%E6%B3%A8%E5%85%A5>SQL注入</a>,<a href=/tags/bypass>bypass</a>)</div><div class=summary-body><p><h3 id=0x00-存在-sql-注入>0x00 存在 SQL 注入</h3><p>总之是遇到一个站，登录的页面，数据包大致如下：</p><pre tabindex=0><code>POST /jsweb/userlogin/UserLoginAction.aspx HTTP/1.1
Host: 115.xxx.xxx.xxx:8042
Content-Length: 47
Accept: */*
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.106 Safari/537.36
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Origin: http://115.xxx.xxx.xxx:8042
Referer: http://115.xxx.xxx.xxx:8042/
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8
Cookie: ASP.NET_SessionId=bxdzehxa5mvoco1fkrjlbqbt
Connection: close

uname=admin*&amp;pwd=dskfsdkf&amp;valCode=1197&amp;telphone=
</code></pre><p>其中验证码可以绕过，而登录名那里存在注入
<img src=/img/post/Xnip2020-09-13_22-20-51.jpg alt>
<img src=/img/post/Xnip2020-09-13_22-21-32.jpg alt></p><a href=https://wyb0.cn/posts/2020/recording-sqlserver-injection/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2019/a-directory-traversal-using-script/>目录遍历利用</a></h1><div class=post-meta><time>2019-12-16</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86>目录遍历</a>)</div><div class=summary-body><p><h3 id=0x00-目录遍历>0x00 目录遍历</h3><p>一个同事说有一些目录遍历，想着能不能搞个脚本啥的，以后利用也方便，自己没有写出来，说让我看看</p><p>一般来说存在目录遍历的话就是翻文件，看看有没有一些敏感信息、未授权接口之类的，一个个翻的话也确实比较麻烦</p><a href=https://wyb0.cn/posts/2019/a-directory-traversal-using-script/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2019/postgresql-basis-use/>PostgreSQL 简单使用</a></h1><div class=post-meta><time>2019-08-23</time>
[<a href=/categories/Database>Database</a>](<a href=/tags/postgre>postgre</a>)</div><div class=summary-body><p><h3 id=0x00-安装>0x00 安装</h3><pre tabindex=0><code>➜  brew install postgresql
➜  echo &#39;export PATH=&#34;/usr/local/Cellar/postgresql/11.4/bin:$PATH&#34;&#39; &gt;&gt; ~/.zshrc
➜  source ~/.zshrc
-- 初始化数据库
➜  initdb /usr/local/var/postgres
➜  pg_ctl -D /usr/local/var/postgres -l /usr/local/var/log/postgres.log start
</code></pre><h3 id=0x01-简单操作>0x01 简单操作</h3><ul><li>常用操作命令</li></ul><pre tabindex=0><code>reber=# \password #设置当前登录用户的密码
reber=# \password [user_name] #设置其他用户的密码
reber=# \l #列出所有数据库
reber=# \du #列出所有用户
reber=# \c [database_name] #连接数据库
reber=# \d #列出当前数据库的所有表
reber=# \d [table_name] #列出表结构
reber=# \conninfo #列出当前数据库和连接的信息
</code></pre><ul><li>连接数据库</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>➜  psql postgres <span style=color:#75715e>#初始化数据库后会生成默认的数据库 postgres</span>
</span></span><span style=display:flex><span>psql <span style=color:#f92672>(</span>11.4<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Type <span style=color:#e6db74>&#34;help&#34;</span> <span style=color:#66d9ef>for</span> help.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>postgres<span style=color:#f92672>=</span><span style=color:#75715e># \l #查看当前数据库情况</span>
</span></span><span style=display:flex><span>                              List of databases
</span></span><span style=display:flex><span>   Name    | Owner | Encoding |   Collate   |    Ctype    | Access privileges
</span></span><span style=display:flex><span>-----------+-------+----------+-------------+-------------+-------------------
</span></span><span style=display:flex><span> postgres  | reber | UTF8     | zh_CN.UTF-8 | zh_CN.UTF-8 |
</span></span><span style=display:flex><span> template0 | reber | UTF8     | zh_CN.UTF-8 | zh_CN.UTF-8 | <span style=color:#f92672>=</span>c/reber         +
</span></span><span style=display:flex><span>           |       |          |             |             | reber<span style=color:#f92672>=</span>CTc/reber
</span></span><span style=display:flex><span> template1 | reber | UTF8     | zh_CN.UTF-8 | zh_CN.UTF-8 | <span style=color:#f92672>=</span>c/reber         +
</span></span><span style=display:flex><span>           |       |          |             |             | reber<span style=color:#f92672>=</span>CTc/reber
</span></span><span style=display:flex><span><span style=color:#f92672>(</span><span style=color:#ae81ff>4</span> rows<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>postgres<span style=color:#f92672>=</span><span style=color:#75715e># \du #查看当前用户</span>
</span></span><span style=display:flex><span>                                   List of roles
</span></span><span style=display:flex><span> Role name |                         Attributes                         | Member of
</span></span><span style=display:flex><span>-----------+------------------------------------------------------------+-----------
</span></span><span style=display:flex><span> reber     | Superuser, Create role, Create DB, Replication, Bypass RLS | <span style=color:#f92672>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>postgres<span style=color:#f92672>=</span><span style=color:#75715e># \c</span>
</span></span><span style=display:flex><span>You are now connected to database <span style=color:#e6db74>&#34;postgres&#34;</span> as user <span style=color:#e6db74>&#34;reber&#34;</span>.
</span></span><span style=display:flex><span>postgres<span style=color:#f92672>=</span><span style=color:#75715e># \password</span>
</span></span><span style=display:flex><span>Enter new password:
</span></span><span style=display:flex><span>Enter it again:
</span></span><span style=display:flex><span>postgres-# <span style=color:#ae81ff>\q</span>
</span></span></code></pre></div><ul><li>修改配置文件改端口</li></ul><p>vim /usr/local/var/postgres/postgresql.conf</p><a href=https://wyb0.cn/posts/2019/postgresql-basis-use/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2019/recording-a-webpage-hanging-horse/>记一次网页 js 挂马</a></h1><div class=post-meta><time>2019-08-19</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/js>js</a>)</div><div class=summary-body><p><h3 id=0x00-常见网页挂马方式>0x00 常见网页挂马方式</h3><ul><li>iframe 框架挂马<br>简单来说就是加 iframe 标签</li><li>script 挂马<br>通过各种办法加载 js 代码</li><li>htm 文件挂马
上传 htm 文件，然后用 script 引入</li><li>js 挂马
上传 js 文件，然后用 script 引入</li><li>图片伪装挂马
比较新颖的一种挂马隐蔽方法</li><li>等等。。。</li></ul><h3 id=0x01-发现被插入恶意-js>0x01 发现被插入恶意 js</h3><p>前几天在做子域名搜集，搜集完后提取 title，结果看到了一个站点的 title 不正常</p><a href=https://wyb0.cn/posts/2019/recording-a-webpage-hanging-horse/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2019/frp-intranet-through/>FRP 内网穿透</a></h1><div class=post-meta><time>2019-07-30</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/intranet>intranet</a>,<a href=/tags/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91>端口转发</a>)</div><div class=summary-body><p><h3 id=0x00-对外提供简单的文件访问服务>0x00 对外提供简单的文件访问服务</h3><ul><li>服务端</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#a6e22e>➜  frp cat frps.ini</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[common]</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; 监听端口</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>bind_port</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>7000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>; 那些端口允许客户端用来映射</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>allow_ports</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>22-80,3000,33389</span>
</span></span></code></pre></div><pre tabindex=0><code>➜  frp ./frps -c frps.ini
2019/07/31 00:22:31 [I] [service.go:139] frps tcp listen on 0.0.0.0:7000
2019/07/31 00:22:31 [I] [root.go:204] Start frps success
</code></pre><ul><li>客户端</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#a6e22e>C:\Users\Administrator\Desktop\frp&gt;type frpc.ini</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[common]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>server_addr</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>66.123.35.123</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>server_port</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>7000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[test_static_file]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>type</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>tcp</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; 文件服务的端口</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>remote_port</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>3000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>; 启用插件</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>plugin</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>static_file</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; 要对外暴露的文件目录</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>plugin_local_path</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>C:\\Users\Administrator\Desktop\frp_file</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; 访问 url 中会被去除的前缀，保留的内容即为要访问的文件路径</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>plugin_strip_prefix</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>myfile</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>; 301 认证</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>plugin_http_user</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>admin</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>plugin_http_passwd</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>123456</span>
</span></span></code></pre></div><pre tabindex=0><code>C:\Users\Administrator\Desktop\frp&gt;frpc.exe -c frpc.ini
2019/07/31 00:36:05 [I] [service.go:221] login to server success, get run id [c8
aef41d5862b79f], server udp port [0]
2019/07/31 00:36:05 [I] [proxy_manager.go:137] [c8aef41d5862b79f] proxy added: [
test_static_file]
2019/07/31 00:36:05 [I] [control.go:144] [test_static_file] start proxy success
</code></pre><ul><li>访问<br>浏览器直接访问 <code>http://66.123.35.123:3000/myfile/</code> 即可访问到 frp_file 中的文件</li></ul><h3 id=0x01-使用-frp-进行内网-3389-端口转发并加密压缩>0x01 使用 frp 进行内网 3389 端口转发并加密压缩</h3><ul><li>服务端</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#a6e22e>➜  frp cat frps.ini</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[common]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>bind_port</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>7000</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>➜  frp ./frps -c frps.ini</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>2019/07/30 23:31:31 [I] [service.go:139] frps tcp listen on 0.0.0.0:7000</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>2019/07/30 23:31:31 [I] [root.go:204] Start frps success</span>
</span></span></code></pre></div><ul><li>客户端</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#a6e22e>C:\Users\Administrator\Desktop\frp&gt;type frpc.ini</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[common]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>server_addr</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>66.123.35.123</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>server_port</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>7000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[rdp]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>type</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>tcp</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>local_ip</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>127.0.0.1</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>local_port</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>3389</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>remote_port</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>33389</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>; 加密压缩</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>use_encryption</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>use_compression</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>true</span>
</span></span></code></pre></div><pre tabindex=0><code>C:\Users\Administrator\Desktop\frp&gt;frpc.exe -c frpc.ini
2019/07/30 23:32:38 [I] [service.go:221] login to server success, get run id [ce
144f7511f63353], server udp port [0]
2019/07/30 23:32:38 [I] [proxy_manager.go:137] [ce144f7511f63353] proxy added: [
rdp]
2019/07/30 23:32:38 [I] [control.go:144] [rdp] start proxy success
</code></pre><p>这里其实可以把 frp 做成服务，开机自启动的那种</p><a href=https://wyb0.cn/posts/2019/frp-intranet-through/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2019/after-transit-via-selenium-flask-to-use-sqlmap/>通过 selenium 和 flask 中转后利用 sqlmap 进行注入</a></h1><div class=post-meta><time>2019-07-27</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/SQL%E6%B3%A8%E5%85%A5>SQL注入</a>)</div><div class=summary-body><p><h3 id=0x00-先说前提>0x00 先说前提</h3><p>昨天某个小伙伴说有个注入没法搞
<img src=/img/post/Xnip2019-07-27_19-20-07.png alt=60></p><p>前端提交登陆表单时数据包加密了, 而且有个 sign 字符串每次都不一样用于校验, 应该是用 js 加密了
<img src=/img/post/Xnip2019-07-27_18-40-20.png alt>
<img src=/img/post/Xnip2019-07-27_18-41-18.png alt></p><a href=https://wyb0.cn/posts/2019/after-transit-via-selenium-flask-to-use-sqlmap/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2019/python-coroutine-fast-port-scan/>利用 Python 的协程进行快速端口扫描</a></h1><div class=post-meta><time>2019-07-04</time>
[<a href=/categories/Python>Python</a>](<a href=/tags/python>python</a>,<a href=/tags/%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86>信息搜集</a>)</div><div class=summary-body><p><h3 id=0x00-协程的优势>0x00 协程的优势</h3><p>协程拥有极高的执行效率，因为子程序切换不是线程切换，而是由程序自身控制，因此没有线程切换的开销。和多线程比，线程数量越多，协程的性能优势就越明显。</p><a href=https://wyb0.cn/posts/2019/python-coroutine-fast-port-scan/>more...</a></p></div></article><div><a href=/>Previous Page</a>
2 of 18
<a href=/page/3/>Next Page</a></div></main></div><footer><hr><p id=social>Find me around the web:
<a href=https://github.com/reber0?_blank>GitHub</a>
•
<a href=https://weibo.com/u/5819760166?_blank>Weibo</a></p><p class=copyright>Copyright © 2015-2025
<a href=https://wyb0.cn/><strong>Reber</strong></a>.
Built with
<a href=http://www.gohugo.io/>Hugo</a>,
based on the theme
<a href=https://gitlab.com/ian-s-mcb/smigle-hugo-theme>smigle</a>.</p></footer></body></html>