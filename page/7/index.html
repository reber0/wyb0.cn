<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.140.2"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=author content="Reber"><title>Reber's Blog</title>
<link rel=stylesheet href=/css/reset.css><link rel=stylesheet href=/css/smigle.css><link rel=stylesheet href=/css/monokai-sublime.min.css><link rel=stylesheet href=/css/style.css><script src=/js/jquery-3.6.0.min.js></script><script src=/js/highlight.min.js></script><script src=/js/style.js></script><link rel=icon type=image/img sizes=16x16 href=/img/logo.png><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"></head><body><header><div id=brand><a class=icon-link href=https://wyb0.cn/><img class=icon src=/img/logo.png></a><div class=text><a href=https://wyb0.cn/><h1>Reber's Blog</h1></a><h3>会一点点编程、会一点点渗透</h3></div></div><nav><a href=/><b>Home</b></a>
|
<a href=/posts/><b>Posts</b></a>
|
<a href=/categories/><b>Categories</b></a>
|
<a href=/tags/><b>Tags</b></a>
|
<a href=/about/><b>About</b></a>
|
<a href=/friends/><b>Friends</b></a></nav><hr></header><div id=content><main><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2017/301-redirect/>301 重定向</a></h1><div class=post-meta><time>2017-02-07</time>
[<a href=/categories/Other>Other</a>](<a href=/tags/%E9%87%8D%E5%AE%9A%E5%90%91>重定向</a>)</div><div class=summary-body><p><h3 id=0x00-目的>0x00 目的</h3><pre tabindex=0><code>由于博客更换了域名，原来百度收录的都成了死链，所以做一下301重定向
我使用的是github搭建的博客，都是html的文件，先把html文件都上传到自己的服务器上，
修改dns使原域名指向服务器，让百度收录的链接都能够访问，然后设置301

服务器环境：Ubuntu 14.04.5、Apache2
</code></pre><h3 id=0x01-开启rewrite模块>0x01 开启rewrite模块</h3><pre tabindex=0><code>$ sudo a2enmod rewrite
</code></pre><h3 id=0x02-根目录下新建htaccess>0x02 根目录下新建.htaccess：</h3><pre tabindex=0><code>Options +FollowSymLinks
RewriteEngine on
RewriteRule ^(.*)$ http://wyb0.com/$1 [L,R=301]  # 这里换上新域名
</code></pre><h3 id=0x03-修改配置文件>0x03 修改配置文件</h3><pre tabindex=0><code># AllowOverride None 改为AllowOverride All

$ sudo vim /etc/apache2/apache2.conf
&lt;Directory /var/www/&gt;
    Options FollowSymLinks
    AllowOverride All
    Require all granted
&lt;/Directory&gt;
</code></pre><h3 id=0x04-重启apache>0x04 重启Apache</h3><pre tabindex=0><code>$ sudo /etc/init.d/apache2 restart
</code></pre></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2017/ubuntu-set-up-gitlab/>Ubuntu 下部署 Gitlab</a></h1><div class=post-meta><time>2017-01-16</time>
[<a href=/categories/Git>Git</a>](<a href=/tags/git>git</a>)</div><div class=summary-body><p><p><img src=/img/anime/anime004.jpg alt=钢之炼金术师FA></p><h3 id=0x00-前期准备>0x00 前期准备</h3><pre tabindex=0><code># 环境 Ubuntu 14.04
reber@ubuntu:~/Desktop$ sudo apt-get install openssh-server
reber@ubuntu:~/Desktop$ sudo apt-get install openssh-client
reber@ubuntu:~/Desktop$ sudo apt-get install git
</code></pre><h3 id=0x01-安装>0x01 安装</h3><pre tabindex=0><code>reber@ubuntu:~/Desktop$ wget https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/ubuntu/pool/trusty/main/g/gitlab-ce/gitlab-ce_8.8.0-ce.0_amd64.deb
reber@ubuntu:~/Desktop$ sudo dpkg -i gitlab-ce_8.8.0-ce.0_amd64.deb
</code></pre><h3 id=0x02-配置>0x02 配置</h3><pre tabindex=0><code>reber@ubuntu:~/Desktop$ sudo vim /etc/gitlab/gitlab.rb
    external_url &#39;http://192.168.188.160:80&#39;
    ......
    gitlab_rails[&#39;time_zone&#39;] = &#39;Asia/Shanghai&#39;
    gitlab_rails[&#39;gitlab_email_from&#39;] = &#39;xxxxxx@163.com&#39;
    ......
    gitlab_rails[&#39;smtp_enable&#39;] = true
    gitlab_rails[&#39;smtp_address&#39;] = &#34;smtp.163.com&#34;
    gitlab_rails[&#39;smtp_port&#39;] = 25
    gitlab_rails[&#39;smtp_user_name&#39;] = &#34;xxxxxx@163.com&#34;
    gitlab_rails[&#39;smtp_password&#39;] = &#34;111111&#34; # 客户端授权密码
    gitlab_rails[&#39;smtp_domain&#39;] = &#34;163.com&#34;
    gitlab_rails[&#39;smtp_authentication&#39;] = &#34;login&#34;
    gitlab_rails[&#39;smtp_enable_starttls_auto&#39;] = true
    ......
    user[&#34;git_user_email&#34;] = &#34;xxxxxx@163.com&#34;
# 只要修改配置文件就要reconfigure
reber@ubuntu:~/Desktop$ sudo gitlab-ctl reconfigure 
reber@ubuntu:~/Desktop$ sudo gitlab-ctl status
run: gitlab-workhorse: (pid 15918) 16s; run: log: (pid 15290) 200s
run: logrotate: (pid 15310) 187s; run: log: (pid 15309) 187s
run: nginx: (pid 15297) 193s; run: log: (pid 15296) 193s
run: postgresql: (pid 15169) 258s; run: log: (pid 15168) 258s
run: redis: (pid 15076) 269s; run: log: (pid 15075) 269s
run: sidekiq: (pid 15384) 141s; run: log: (pid 15279) 206s
run: unicorn: (pid 15360) 158s; run: log: (pid 15246) 212s
reber@ubuntu:~/Desktop$ netstat -anlt
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address       Foreign Address      State
tcp        0      0 127.0.0.1:8080      0.0.0.0:*            LISTEN
tcp        0      0 0.0.0.0:80          0.0.0.0:*            LISTEN
tcp        0      0 127.0.1.1:53        0.0.0.0:*            LISTEN
tcp        0      0 0.0.0.0:22          0.0.0.0:*            LISTEN

# 其中8080是unicore的端口
# 80是nginx的端口，nginx反向代理ruby开的web服务unicore
</code></pre><h3 id=0x03-访问web页面>0x03 访问web页面</h3><ul><li><p>有时出现502，可以刷新网页或者再次reconfigure</p><a href=https://wyb0.cn/posts/2017/ubuntu-set-up-gitlab/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/js-package-cookie-function/>[转] JS 操作 cookie 方法的封装</a></h1><div class=post-meta><time>2016-12-27</time>
[<a href=/categories/JS>JS</a>](<a href=/tags/js>js</a>)</div><div class=summary-body><p><p>原文链接：http://www.wyzu.cn/2015/0123/107167.html</p><h3 id=0x00-实现功能>0x00 实现功能</h3><ul><li>添加cookie</li><li>获取所有cookie</li><li>根据名字获取单个cookie的值</li><li>移除所有cookie</li><li>根据名字移除单个cookie</li></ul><h3 id=0x01-封装cookiejs源码>0x01 封装cookie.js源码</h3><pre tabindex=0><code>/*
 * 名称和值传送时必须是经过RUL编码的
 * cookie绑定在指定的域名下，非本域无法共享cookie，但是可以是在主站共享cookie给子站
 * cookie的名称不分大小写；同时建议将cookie URL编码
 * 建议针对cookie设置expires、domain、 path；每个cookie小于4KB
 **/

(function(global){
    function getCookiesObj() {
        //获得cookie对象
        var cookies = {};
        if (document.cookie) {
            var objs = document.cookie.split(&#39;; &#39;);
            for (var i in objs) {
                var index = objs[i].indexOf(&#39;=&#39;),
                    name = objs[i].substr(0,index),
                    value = objs[i].substr(index+1,objs[i].length);
                cookies[name] = value;
            }
        }
        return cookies;
    }

    function set(sName,sValue,Opts) {
        //设置cookie
        // Opts expires,path,domain,secure
        if (sName &amp;&amp; sValue) {
            var cookie = encodeURIComponent(sName)+&#39;=&#39;+encodeURIComponent(sValue);
            
            if (Opts) {
                if (Opts.expires) {
                    var date = new Date();
                    date.setTime(date.getTime()+Opts.expires*24*3600*1000)
                    cookie += &#39;; expires=&#39; + date.toGMTString();
                }
                if (Opts.path) {
                    cookie += &#39;; path=&#39; + Opts.path;
                }
                if (Opts.domain) {
                    cookie += &#39;; domain=&#39; + Opts.domain;
                }
                if (Opts.secure) {
                    cookie += &#39;; secure&#39;;
                }
            }
            document.cookie = cookie;
            return cookie;
        } else {
            return &#39;&#39;;
        }
    }

    function getCookie(name) {
        //得到某个cookie
        return decodeURIComponent(getCookiesObj()[name]) || null;
    }

    function getCookies() {
        //得到所有cookie
        return getCookiesObj();
    }

    function remove(name) {
        //移除某个cookie
        if (getCookiesObj()[name]) {
            var date = new Date();
            date.setDate(date.getDate()-1);
            document.cookie = name + &#39;=; expires=&#39;+date.toGMTString();
        }
    }

    function clear() {
        // 移除所有cookie
        var cookies = getCookiesObj();
        var date = new Date();
        date.setDate(date.getDate()-1);
        for (var key in cookies) {
            document.cookie = key + &#39;=; expires=&#39;+date.toGMTString();
        }
    }

    function noConflict(name) {
        //解决冲突
        if (name &amp;&amp; typeof name === &#39;string&#39;) {
            if (name &amp;&amp; window[&#39;cookie&#39;]) {
                window[name] = window[&#39;cookie&#39;];
                delete window[&#39;cookie&#39;];
                return window[name];
            }
        } else {
            return window[&#39;cookie&#39;];
            delete window[&#39;cookie&#39;];
        }
    }

    global[&#39;cookie&#39;] = {
        &#39;set&#39;: set,
        &#39;getCookies&#39;: getCookies,
        &#39;getCookie&#39;: getCookie,
        &#39;remove&#39;: remove,
        &#39;clear&#39;: clear,
        &#39;noConflict&#39;: noConflict
    };
})(window);
</code></pre><h3 id=0x02-利用的ahtml源码>0x02 利用的a.html源码</h3><pre tabindex=0><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&#34;utf-8&#34;&gt;
        &lt;title&gt;cookie example&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;script type=&#34;text/javascript&#34; src=&#34;./cookie.js&#34; &gt;&lt;/script&gt;
        &lt;script type=&#34;text/javascript&#34;&gt;
            console.log(&#39;----------cookie对象-------------&#39;);
            console.log(cookie);
            console.log(&#39;----------对象-------------&#39;);
            console.log(cookie.getCookies());
            console.log(&#39;----------设置cookie-------------&#39;);
            console.log(cookie.set(&#39;name&#39;, &#39;wlh&#39;));
            console.log(&#39;----------设置cookie 123-------------&#39;);
            console.log(cookie.set(&#39;name&#39;, &#39;wlh123&#39;));
            console.log(&#39;----------设置cookie age-------------&#39;);
            console.log(cookie.set(&#39;age&#39;, 20));
            // alert(document.cookie);
            console.log(&#39;----------获取cookie-------------&#39;);
            console.log(cookie.getCookie(&#39;name&#39;));
            console.log(&#39;----------获取所有-------------&#39;);
            console.log(cookie.getCookies());
            console.log(&#39;----------清除age-------------&#39;);
            console.log(cookie.remove(&#39;age&#39;));
            console.log(&#39;----------获取所有-------------&#39;);
            console.log(cookie.getCookies());
            console.log(&#39;----------清除所有-------------&#39;);
            console.log(cookie.clear());
            console.log(&#39;----------获取所有-------------&#39;);
            console.log(cookie.getCookies());
            console.log(&#39;----------解决冲突-------------&#39;);
            var $Cookie = cookie.noConflict(true /*a new name of cookie*/);
            console.log($Cookie);
            console.log(&#39;----------使用新的命名-------------&#39;);
            console.log($Cookie.getCookies());
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><h3 id=0x03-结果>0x03 结果</h3><p><img src=/img/post/js_cookie.png alt=调用封装文件操作cookie></p><a href=https://wyb0.cn/posts/2016/js-package-cookie-function/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/cdn-detection/>Python 实现 CDN 的判断</a></h1><div class=post-meta><time>2016-12-23</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86>信息搜集</a>)</div><div class=summary-body><p><p><img src=/img/anime/anime002.jpg alt=银魂></p><h3 id=0x00-什么是cdn>0x00 什么是CDN</h3><pre tabindex=0><code>CDN的全称是Content Delivery Network，即内容分发网络。主要功能是在不同地点缓存内容，
运营商会在全国各地的节点上缓存你的网站网页，通过负载均衡技术，将用户的请求定向到最合适的
缓存服务器上去获取内容，比如说你是上海用户，你访问www.aa.com就会被重定向到上海的节点，
你是北京用户，你也访问www.aa.com，但是你会被重定向到上海的节点。
</code></pre><h3 id=0x01-判断方法>0x01 判断方法</h3><ul><li>可以查询CNAME记录，每个cdn厂商都有特有的特征串</li><li>查看http返回头的头部信息</li></ul><h3 id=0x02-代码>0x02 代码</h3><p>首先安装dnspython这个第三方模块：pip install dnspython</p><a href=https://wyb0.cn/posts/2016/cdn-detection/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/ajax-and-php/>AJAX 与 PHP</a></h1><div class=post-meta><time>2016-11-16</time>
[<a href=/categories/JS>JS</a>](<a href=/tags/js>js</a>)</div><div class=summary-body><p><h3 id=0x00-ajax与php>0x00 AJAX与PHP</h3><p>ajax.html代码如下：</p><pre tabindex=0><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&#34;utf-8&#34;&gt;
    &lt;script&gt;
    function showHint(str) {
        var xmlhttp;
        if (str.length==0) { 
            document.getElementById(&#34;txtHint&#34;).innerHTML=&#34;&#34;;
            return;
        }
        if (window.XMLHttpRequest) {
            // IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码
            xmlhttp=new XMLHttpRequest(); //创建对象
        } else {
            // IE6, IE5 浏览器执行代码
            xmlhttp=new ActiveXObject(&#34;Microsoft.XMLHTTP&#34;);
        }
        xmlhttp.onreadystatechange=function() {
            if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) {
                document.getElementById(&#34;txtHint&#34;).innerHTML=xmlhttp.responseText;
            }
        }
        xmlhttp.open(&#34;GET&#34;,&#34;./ajax.php?q=&#34;+str,true);
        xmlhttp.send();
    }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h3&gt;在输入框中尝试输入字母 a:&lt;/h3&gt;
    &lt;form action=&#34;&#34;&gt; 
    输入姓名: &lt;input type=&#34;text&#34; id=&#34;txt1&#34; onkeyup=&#34;showHint(this.value)&#34; /&gt;
    &lt;/form&gt;
    &lt;p&gt;提示信息: &lt;span id=&#34;txtHint&#34;&gt;&lt;/span&gt;&lt;/p&gt; 
&lt;/body&gt;
&lt;/html&gt;
</code></pre><pre tabindex=0><code>上面的代码会完成以下的东西：

1. 在输入字母时会调用showHint()
2. showHint()创建对象
3. 定义onreadystatechange事件
4. xmlhttp.open()访问当前目录下的ajax.php来请求资源
</code></pre><p>ajax.php代码如下：</p><a href=https://wyb0.cn/posts/2016/ajax-and-php/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/mysql-injection-error-based-theory-count-rand-groupby/>[转] MySQL 报错注入原理分析(count()、rand()、group by)</a></h1><div class=post-meta><time>2016-11-13</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/SQL%E6%B3%A8%E5%85%A5>SQL注入</a>)</div><div class=summary-body><p><p>原文链接：<a href=http://drops.wooyun.org/tips/14312?_blank>http://drops.wooyun.org/tips/14312</a></p><h3 id=0x00-疑问>0x00 疑问</h3><p>一直在用mysql数据库报错注入方法，但为何会报错？</p><p><img src=/img/post/wooyun-drops-tips-14312-1.jpg alt></p><p>百度谷歌知乎了一番，发现大家都是把官网的结论发一下截图，然后执行sql语句证明一下结论，但是没有人去深入研究为什么rand不能和order by一起使用，也没彻底说明三者同时使用报错的原理。</p><a href=https://wyb0.cn/posts/2016/mysql-injection-error-based-theory-count-rand-groupby/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/nessus-install-and-remove/>Nessus 的安装和卸载</a></h1><div class=post-meta><time>2016-11-13</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/tools>tools</a>)</div><div class=summary-body><p><h3 id=0x00-下载-nessus-的-deb-安装包>0x00 下载 Nessus 的 deb 安装包</h3><p>去【<a href=http://www.tenable.com/products/nessus/select-your-operating-system?_blank>这里</a>】，选择家庭版，然后下载对应的安装包
<img src=/img/post/Nessus_Home.png alt=70>
<img src=/img/post/select_nessus_deb.png alt=40></p><h3 id=0x01-本地安装-nessus>0x01 本地安装 Nessus</h3><p><img src=/img/post/install_nessus.png alt=60></p><h3 id=0x02-执行后续安装步骤>0x02 执行后续安装步骤:</h3><ol><li><p>启动nessus
<img src=/img/post/start_nessus.png alt=45></p></li><li><p>web访问nessus服务
<img src=/img/post/web_nessus.png alt=80></p></li><li><p>设置账户和密码
<img src=/img/post/setaccount.png alt=30>
<img src=/img/post/code.png alt=50></p></li><li><p>申请code，可以在【<a href=http://www.tenable.com/products/nessus-home>这里</a>】申请
<img src=/img/post/register_code.png alt=30></p><a href=https://wyb0.cn/posts/2016/nessus-install-and-remove/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/ajax-request-and-response/>AJAX 的 XHR 请求与响应</a></h1><div class=post-meta><time>2016-10-25</time>
[<a href=/categories/JS>JS</a>](<a href=/tags/js>js</a>)</div><div class=summary-body><p><h3 id=0x00-什么是ajax>0x00 什么是AJAX</h3><p>AJAX全称是Asynchronous JavaScript and XML，即异步的JavaScript和XML<br>AJAX不是新的编程语言，而是一种使用现有标准的新方法。<br>AJAX可在不重新加载整个页面的情况下与服务器交换数据从而更新部分网页</p><a href=https://wyb0.cn/posts/2016/ajax-request-and-response/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/dirty-cow-vulnerabilities/>脏牛漏洞</a></h1><div class=post-meta><time>2016-10-22</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/intranet>intranet</a>)</div><div class=summary-body><p><h3 id=0x00-测试环境>0x00 测试环境</h3><p>我是在本地虚拟机测试的，个人理解这个漏洞的话可以起到的作用是：一个普通用户可以覆盖一个root用户的只读文件，若理解有误则希望大家提意见</p><a href=https://wyb0.cn/posts/2016/dirty-cow-vulnerabilities/>more...</a></p></div></article><article><h1 class=summary-title><a href=https://wyb0.cn/posts/2016/code-execution-vulnerabilities-2/>代码执行漏洞(二)</a></h1><div class=post-meta><time>2016-10-14</time>
[<a href=/categories/Pentest>Pentest</a>](<a href=/tags/rce>rce</a>)</div><div class=summary-body><p><h4 id=接着上一篇代码执行漏洞一posts2016code-execution-vulnerabilities>接着上一篇：<a href=/posts/2016/code-execution-vulnerabilities/>代码执行漏洞(一)</a></h4><h3 id=0x00-函数create_function>0x00 函数create_function()</h3><p>php中的函数create_function()可以创建一个匿名函数，其函数原型如下：</p><a href=https://wyb0.cn/posts/2016/code-execution-vulnerabilities-2/>more...</a></p></div></article><div><a href=/page/6/>Previous Page</a>
7 of 18
<a href=/page/8/>Next Page</a></div></main></div><footer><hr><p id=social>Find me around the web:
<a href=https://github.com/reber0?_blank>GitHub</a>
•
<a href=https://weibo.com/u/5819760166?_blank>Weibo</a></p><p class=copyright>Copyright © 2015-2025
<a href=https://wyb0.cn/><strong>Reber</strong></a>.
Built with
<a href=http://www.gohugo.io/>Hugo</a>,
based on the theme
<a href=https://gitlab.com/ian-s-mcb/smigle-hugo-theme>smigle</a>.</p></footer></body></html>