<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content=""/>
  <meta name="author" content="Reber"/>
  
    
      <title>Python 的函数式编程 | Reber&#39;s Blog</title>
    
  
  <link rel="stylesheet" href="/css/reset.css"/>
  <link rel="stylesheet" href="/css/font.css"/>
  <link rel="stylesheet" href="/css/smigle.css"/>
  
    <link rel="stylesheet" href="/css/monokai-sublime.min.css"/>
  
    <link rel="stylesheet" href="/css/style.css"/>
  
  
    <script src="/js/jquery-3.6.0.min.js"/></script>
  
    <script src="/js/highlight.min.js"/></script>
  
    <script src="/js/style.js"/></script>
  
  <link rel="icon" type="image/img" sizes="16x16" href="/img/logo.png">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
</head>

  <body>
    <header>
  <div id="brand">
    <a class="icon-link" href="https://wyb0.com/">
      <img
        class="icon"
        src="/img/logo.png"
      />
    </a>
    <div class="text">
      <a href="https://wyb0.com/"><h1>Reber&#39;s Blog</h1></a>
      <h3>只会一点点编程、只会一点点渗透</h3>
    </div>
  </div>
  <nav>
    
      
        
        <a href="/"><b>Home</b></a>
      
         | 
        <a href="/posts/"><b>Posts</b></a>
      
         | 
        <a href="/categories/"><b>Categories</b></a>
      
         | 
        <a href="/tags/"><b>Tags</b></a>
      
         | 
        <a href="/about/"><b>About</b></a>
      
         | 
        <a href="/friends/"><b>Friends</b></a>
      
    
  </nav>
  <hr />
</header>

    <div id="content">
      
  <main>
    <article>
      <h1>Python 的函数式编程</h1>
      <div class="post-meta">
  <strong>
    <span>Posted on</span>
    <time>2016-01-21</time>
    <span>in</span>
    
      <a href="/categories/Python">Python</a>
  </strong>
  <span> • 1253 words</span>
  
  
  
    <div>
      <span>Tags:</span>
      
        <a href="/tags/python">python</a>
    </div>
  
</div>

      <div>

<h3 id="0x00-函数式编程">0x00 函数式编程</h3>

<p>首先说一下高阶函数，能将函数作为参数来接收的函数就可以称为高阶函数，如下：</p>

<pre><code class="language-python">def add(x,y,f):
    return f(x) + f(y)
print add(7,-3,abs) #abs是求绝对值的函数，这里返回的值为10
</code></pre>

<p>将函数作为参数传入，这样的函数就是高阶函数，而函数式编程就是指这种抽象程度很高的编程范式。<br />
函数式编程的一个特点就是可以将函数作为参数，还允许返回一个函数。<br />
纯粹的函数式编程语言编写的函数没有变量，因此，任意一个函数，只要输入是确定的，输出就是确定的，这种纯函数我们称之为没有副作用。<br />
允许使用变量的程序设计语言，由于函数内部的变量状态不确定，同样的输入，可能得到不同的输出，因此，这种函数是有副作用的。</p>

<h3 id="0x01-高阶函数">0x01 高阶函数</h3>

<ul>
<li>map()函数<br />
map接收两个参数，一个是函数，一个是列表(list)，map将函数依次作用到list的每个元素，然后返回新的list</li>
</ul>

<pre><code class="language-python">def f(x):
    return x*x
print map(f,[1,2,3,4]) #返回[1,4,9,16]
print map(str,[1,2,3,4]) # 返回['1','2','3','4']
</code></pre>

<ul>
<li>reduce()函数<br />
reduce接收参数和map一样(但传入的函数必须接收两个参数)，reduce会对list的每个元素反复调用函数，然后返回最终值</li>
</ul>

<pre><code class="language-python">def f(x,y):
    return x*y
print reduce(f,[1,2,3,4]) #1*2*3*4，返回24
</code></pre>

<ul>
<li>filter()函数<br />
filter也接收函数和list，函数会对list的每个元素进行判断然后返回True或False，为True的组成新list返回</li>
</ul>

<pre><code class="language-python">def f(x):
    return x &gt; 3
print filter(f,[1,2,3,4,5]) #返回[4,5]
</code></pre>

<ul>
<li>sorted()函数<br />
Python内置的函数sorted()可以对list进行排序</li>
</ul>

<pre><code class="language-python">sorted([34,2,345,3]) #返回[2,3,34,345]
</code></pre>

<p>sorted也是一个高阶函数，当然也可以接收函数和参数。通常规定，对于两个元素x和y，若认为x &lt; y则返回-1，若认为x == y则返回0，若认为x &gt; y则返回1，从而进行正向排序</p>

<pre><code class="language-python">def s(s1,s2):
    u1 = s1.lower()
    u2 = s2.lower()
    if u1 &lt; u2:
        return -1
    if u1 &gt; u2:
        return 1
    return 0
print sorted(['tom,Bob,Jerry,Alim'],s) #返回['Alim','Bob','Jerry','tom']
</code></pre>

<h3 id="0x02-匿名函数">0x02 匿名函数</h3>

<p>匿名函数有时可以节省代码量，它没有函数名，也不存在return，它会用到关键字lambda，后面跟参数，然后是冒号，冒号后面写表达式(也是返回值)，形如：lambda x,y:x*y代表的就是参数为x,y，返回x*y。Python的匿名函数都可以用def代替</p>

<pre><code class="language-python">print map(lambda x:x*x,[1,2,3,4]) #返回[1,4,9,16]
print reduce(lambda x,y:x*y,[1,2,3,4]) #返回1*2*3*4，即24
print filter(lambda x:x&gt;3,[1,2,3,4,5]) #返回[4,5]
f = lambda x,y:x+y
print f(3,2) #返回5
g = lambda x,y=3:x+y
print g(5) #不输入y值则默认为3，这里返回8
print (lambda s:' '.join(s.split('*')))(&quot;I*am*tom&quot;) #返回I am tom
print (lambda x,y:x if x&gt;y else y)(53,34) #返回53
L = [lambda x:x**2,lambda x:x**3,lambda x:x**4]
for f in L:
    print f(2), #输出4 8 16
</code></pre>

<h3 id="0x03-装饰器">0x03 装饰器</h3>

<p>装饰器可以提高程序的课重复利用性，并增加程序的可读性</p>

<ul>
<li>不带参数</li>
</ul>

<pre><code class="language-python">#!/usr/bin/env python
# -*- coding: utf-8 -*-

def deco(func):
    def _deco():
        print &quot;before func()&quot;
        func()
        print &quot;after func()&quot;

    return _deco #返回一个修饰过的函数(即修改过的func())


@deco #等价于foo = deco(foo)，即修饰过的函数赋给foo
def foo():
    print &quot;this is foo()&quot;

foo() # 此时的foo()就是deco(foo)的返回值，即函数_deco()
&quot;&quot;&quot;
#结果如下：
# before func()
# this is foo()
# after func()
&quot;&quot;&quot;
</code></pre>

<ul>
<li>带参数</li>
</ul>

<pre><code class="language-python">def deco(func):
    def _deco(*args, **kwargs):
        print &quot;before func()&quot;
        ret = func(*args, **kwargs)
        print &quot;after func()&quot;
        return ret

    return _deco

@deco
def myfunc1(a, b):
    print &quot;myfunc1&quot;
    return a+b

@deco
def myfunc2(a, b, c):
    print &quot;myfunc2&quot;
    return a+b+c

print myfunc1(2,3)
print myfunc2(2,3,4)
&quot;&quot;&quot;
#结果如下：
# before func()
# myfunc1
# after func()
# 5
# before func()
# myfunc2
# after func()
# 9
&quot;&quot;&quot;
</code></pre>
</div>
    </article>
  </main>

    </div>
    <footer>
  <hr />
  
    <p id="social">
      Find me around the web:
      <br />
      
        
        <a href="https://github.com/reber0?_blank">GitHub</a>
      
         | 
        <a href="https://weibo.com/u/5819760166?_blank">Weibo</a>
      
    </p>
  
  <p class="copyright">
    Copyright © 2015-2022
    <a href="https://wyb0.com/"><strong>Reber</strong></a>.

    Built with
    <a href="http://www.gohugo.io/">Hugo</a>,
    using the theme
    <a href="https://gitlab.com/ian-s-mcb/smigle-hugo-theme">smigle</a>.
  </p>
</footer>

  </body>
</html>
