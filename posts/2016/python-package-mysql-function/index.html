<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content=""/>
  <meta name="author" content="Reber"/>
  
    
      <title>Python 封装 MySQL 类 | Reber&#39;s Blog</title>
    
  
  <link rel="stylesheet" href="/css/reset.css"/>
  
  <link rel="stylesheet" href="/css/smigle.css"/>
  
    <link rel="stylesheet" href="/css/monokai-sublime.min.css"/>
  
    <link rel="stylesheet" href="/css/style.css"/>
  
  
    <script src="/js/jquery-3.6.0.min.js"/></script>
  
    <script src="/js/highlight.min.js"/></script>
  
    <script src="/js/style.js"/></script>
  
  <link rel="icon" type="image/img" sizes="16x16" href="/img/logo.png">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
</head>

  <body>
    <header>
  <div id="brand">
    <a class="icon-link" href="https://wyb0.com/">
      <img
        class="icon"
        src="/img/logo.png"
      />
    </a>
    <div class="text">
      <a href="https://wyb0.com/"><h1>Reber&#39;s Blog</h1></a>
      <h3>只会一点点编程、只会一点点渗透</h3>
    </div>
  </div>
  <nav>
    
      
        
        <a href="/"><b>Home</b></a>
      
         | 
        <a href="/posts/"><b>Posts</b></a>
      
         | 
        <a href="/categories/"><b>Categories</b></a>
      
         | 
        <a href="/tags/"><b>Tags</b></a>
      
         | 
        <a href="/about/"><b>About</b></a>
      
         | 
        <a href="/friends/"><b>Friends</b></a>
      
    
  </nav>
  <hr />
</header>

    <div id="content">
      
  <main>
    <article>
      <h1>Python 封装 MySQL 类</h1>
      
<div class="post-meta">
    <time>2016-09-12</time>
    
    [<a href="/categories/Python">Python</a>,<a href="/categories/Database">Database</a>](<a href="/tags/python">python</a>,<a href="/tags/mysql">mysql</a>)
</div>

      <div><h3 id="0x00-安装">0x00 安装</h3>
<p>有两种，一个是MySQLdb，一个是pymysql</p>
<ul>
<li>下载<a href="https://pypi.python.org/pypi/MySQL-python/1.2.5">MySQL-python</a>然后安装</li>
<li>sudo pip install pymysql(推荐，因为py3已经不支持MySQLdb了)</li>
</ul>
<h3 id="0x01-简单表设计如下">0x01 简单表设计如下</h3>
<pre tabindex="0"><code>insert into mysql.user(Host,User,Password) values(&#39;%&#39;,&#39;python&#39;,&#39;123456&#39;);

drop database if exists python;
create database python;
use python;

drop table if exists msg;
create table msg(
    id int not null auto_increment primary key,
    ip varchar(40) not null default &#39;127.0.0.1&#39; comment &#39;ip地址&#39;,
    domain varchar(100) not null default &#39;www.xx.com&#39; comment &#39;域名&#39;
);

grant all privileges on python.* to &#39;python&#39;@&#39;%&#39; identified by &#39;123456&#39;;
flush privileges;
</code></pre><h3 id="0x02-mysqldb封装代码">0x02 MySQLdb封装代码</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/env python</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -*- coding: utf-8 -*-</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> MySQLdb
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">mysql</span>(object):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;docstring for mysql&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, dbconfig):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>host <span style="color:#f92672">=</span> dbconfig[<span style="color:#e6db74">&#39;host&#39;</span>]
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>port <span style="color:#f92672">=</span> dbconfig[<span style="color:#e6db74">&#39;port&#39;</span>]
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>user <span style="color:#f92672">=</span> dbconfig[<span style="color:#e6db74">&#39;user&#39;</span>]
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>passwd <span style="color:#f92672">=</span> dbconfig[<span style="color:#e6db74">&#39;passwd&#39;</span>]
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>dbname <span style="color:#f92672">=</span> dbconfig[<span style="color:#e6db74">&#39;dbname&#39;</span>]
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>charset <span style="color:#f92672">=</span> dbconfig[<span style="color:#e6db74">&#39;charset&#39;</span>]
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>_conn <span style="color:#f92672">=</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>_connect()
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>_cursor <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>_conn<span style="color:#f92672">.</span>cursor()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_connect</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>_conn <span style="color:#f92672">=</span> MySQLdb<span style="color:#f92672">.</span>connect(host<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>host,
</span></span><span style="display:flex;"><span>                port <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>port,
</span></span><span style="display:flex;"><span>                user<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>user,
</span></span><span style="display:flex;"><span>                passwd<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>passwd,
</span></span><span style="display:flex;"><span>                db<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>dbname,
</span></span><span style="display:flex;"><span>                charset<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>charset)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">except</span> MySQLdb<span style="color:#f92672">.</span>Error,e:
</span></span><span style="display:flex;"><span>            print e
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">query</span>(self, sql):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>            result <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>_cursor<span style="color:#f92672">.</span>execute(sql)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">except</span> MySQLdb<span style="color:#f92672">.</span>Error, e:
</span></span><span style="display:flex;"><span>            print e
</span></span><span style="display:flex;"><span>            result <span style="color:#f92672">=</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> result
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">select</span>(self, table, column<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;*&#39;</span>, condition<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>):
</span></span><span style="display:flex;"><span>        condition <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39; where &#39;</span> <span style="color:#f92672">+</span> condition <span style="color:#66d9ef">if</span> condition <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> condition:
</span></span><span style="display:flex;"><span>            sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;select </span><span style="color:#e6db74">%s</span><span style="color:#e6db74"> from </span><span style="color:#e6db74">%s</span><span style="color:#e6db74"> </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> (column,table,condition)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;select </span><span style="color:#e6db74">%s</span><span style="color:#e6db74"> from </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> (column,table)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>query(sql)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>_cursor<span style="color:#f92672">.</span>fetchall()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">insert</span>(self, table, tdict):
</span></span><span style="display:flex;"><span>        column <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>        value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> key <span style="color:#f92672">in</span> tdict:
</span></span><span style="display:flex;"><span>            column <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#39;,&#39;</span> <span style="color:#f92672">+</span> key
</span></span><span style="display:flex;"><span>            value <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;&#39;,&#39;&#34;</span> <span style="color:#f92672">+</span> tdict[key]
</span></span><span style="display:flex;"><span>        column <span style="color:#f92672">=</span> column[<span style="color:#ae81ff">1</span>:]
</span></span><span style="display:flex;"><span>        value <span style="color:#f92672">=</span> value[<span style="color:#ae81ff">2</span>:] <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;&#39;&#34;</span>
</span></span><span style="display:flex;"><span>        sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;insert into </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">(</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">) values(</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">)&#34;</span> <span style="color:#f92672">%</span> (table,column,value)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>_cursor<span style="color:#f92672">.</span>execute(sql)
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>_conn<span style="color:#f92672">.</span>commit()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">except</span>:
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>rollback()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>_cursor<span style="color:#f92672">.</span>lastrowid <span style="color:#75715e">#返回最后的id</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">update</span>(self, table, tdict, condition<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> condition:
</span></span><span style="display:flex;"><span>            print <span style="color:#e6db74">&#34;must have id&#34;</span>
</span></span><span style="display:flex;"><span>            exit()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            condition <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;where &#39;</span> <span style="color:#f92672">+</span> condition
</span></span><span style="display:flex;"><span>        value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> key <span style="color:#f92672">in</span> tdict:
</span></span><span style="display:flex;"><span>            value <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;,</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">=&#39;</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#39;&#34;</span> <span style="color:#f92672">%</span> (key,tdict[key])
</span></span><span style="display:flex;"><span>        value <span style="color:#f92672">=</span> value[<span style="color:#ae81ff">1</span>:]
</span></span><span style="display:flex;"><span>        sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;update </span><span style="color:#e6db74">%s</span><span style="color:#e6db74"> set </span><span style="color:#e6db74">%s</span><span style="color:#e6db74"> </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> (table,value,condition)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>_cursor<span style="color:#f92672">.</span>execute(sql)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">except</span>:
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>rollback()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>affected_num() <span style="color:#75715e">#返回受影响行数</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">delete</span>(self, table, condition<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>):
</span></span><span style="display:flex;"><span>        condition <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;where &#39;</span> <span style="color:#f92672">+</span> condition <span style="color:#66d9ef">if</span> condition <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span>        sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;delete from </span><span style="color:#e6db74">%s</span><span style="color:#e6db74"> </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> (table,condition)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>_cursor<span style="color:#f92672">.</span>execute(sql)
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>_conn<span style="color:#f92672">.</span>commit()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">except</span>:
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>rollback()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>affected_num() <span style="color:#75715e">#返回受影响行数</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">rollback</span>(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>_conn<span style="color:#f92672">.</span>rollback()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">affected_num</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>_cursor<span style="color:#f92672">.</span>rowcount
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __del__(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>_cursor<span style="color:#f92672">.</span>close()
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>_conn<span style="color:#f92672">.</span>close()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">except</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">close</span>(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>__del__()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    dbconfig <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;host&#39;</span>:<span style="color:#e6db74">&#39;192.168.188.134&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;port&#39;</span>:<span style="color:#ae81ff">3306</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;user&#39;</span>:<span style="color:#e6db74">&#39;python&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;passwd&#39;</span>:<span style="color:#e6db74">&#39;123456&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;dbname&#39;</span>:<span style="color:#e6db74">&#39;python&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;charset&#39;</span>:<span style="color:#e6db74">&#39;utf8&#39;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    db <span style="color:#f92672">=</span> mysql(dbconfig)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># print db.select(&#39;msg&#39;,&#39;id,ip,domain&#39;)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># print db.select(&#39;msg&#39;,&#39;id,ip,domain&#39;,&#39;id&gt;2&#39;)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># print db.affected_num()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># tdict = {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#     &#39;ip&#39;:&#39;111.13.100.91&#39;,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#     &#39;domain&#39;:&#39;baidu.com&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># }</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># print db.insert(&#39;msg&#39;, tdict)</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># tdict = {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#     &#39;ip&#39;:&#39;111.13.100.91&#39;,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#     &#39;domain&#39;:&#39;aaaaa.com&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># }</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># print db.update(&#39;msg&#39;, tdict, &#39;id=5&#39;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># print db.delete(&#39;msg&#39;, &#39;id&gt;3&#39;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    db<span style="color:#f92672">.</span>close()
</span></span></code></pre></div><h3 id="0x03-pymysql封装代码">0x03 pymysql封装代码</h3>
<pre tabindex="0"><code>#!/usr/bin/env python
# -*- coding: utf-8 -*-

import urlparse
import pymysql
import contextlib

class MySQLX(object):
    def __init__(self, mysql_uri):
        super(MySQLX, self).__init__()
        self.mysql_uri = mysql_uri
        self.mysql_info = self.mysql_parse_uri()

    def mysql_parse_uri(self):
        p = urlparse.urlparse(self.mysql_uri)
        host = p.hostname
        port = p.port
        user = p.username
        password = p.password
        dbname = p.path.strip(&#39;/&#39;)
        charset = urlparse.parse_qs(p.query)[&#39;charset&#39;][0]

        return {
            &#39;host&#39;: host,
            &#39;port&#39;: port,
            &#39;user&#39;: user,
            &#39;password&#39;: password,
            &#39;db&#39;: dbname,
            &#39;charset&#39;: charset,
            &#39;cursorclass&#39;: pymysql.cursors.DictCursor,
        }

    @contextlib.contextmanager
    def init(self):
        dbconn = pymysql.connect(**self.mysql_info)
        cursor = dbconn.cursor()
        # dbconn = pymysql.connect(
        #     host=mysql_info.get(&#39;host&#39;),
        #     user=mysql_info.get(&#39;user&#39;),
        #     password=mysql_info.get(&#39;password&#39;),
        #     db=mysql_info.get(&#39;db&#39;),
        #     charset=mysql_info.get(&#39;charset&#39;)
        #     )
        # cursor = dbconn.cursor(cursor=pymysql.cursors.DictCursor)

        try:
            yield cursor #这里就是with返回的
        finally:
            dbconn.commit()
            cursor.close()
            dbconn.close()

    def query(self, sql, arg=&#39;&#39;):
        try:
            with self.init() as cursor:
                if arg:

                    cursor.execute(sql,arg) #返回受影响行数
                else:
                    cursor.execute(sql)
                result = cursor.fetchall() #返回数据格式是[{},{}]
                # result = cursor.fetchone() #返回数据格式是{}
                return result
        except Exception as e:
            print sql,str(e)

if __name__ == &#39;__main__&#39;:
    mysql_uri = &#34;mysql+pymysql://root:root@localhost:3306/rtest?charset=utf8mb4&#34;
    sqlconn = MySQLX(mysql_uri)
    sql = &#34;select * from `msg` where id=%s&#34;
    result = sqlconn.query(sql,&#34;2&#34;)
    print result
</code></pre></div>
    </article>
  </main>

    </div>
    <footer>
  <hr />
  
    <p id="social">
      Find me around the web:
      
        
        <a href="https://github.com/reber0?_blank">GitHub</a>
      
         • 
        <a href="https://weibo.com/u/5819760166?_blank">Weibo</a>
      
    </p>
  
  <p class="copyright">
    Copyright © 2015-2024
    <a href="https://wyb0.com/"><strong>Reber</strong></a>.

    Built with
    <a href="http://www.gohugo.io/">Hugo</a>,
    based on the theme
    <a href="https://gitlab.com/ian-s-mcb/smigle-hugo-theme">smigle</a>.
  </p>
</footer>

  </body>
</html>
